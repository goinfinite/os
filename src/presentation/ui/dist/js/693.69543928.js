"use strict";(self["webpackChunksos_dash"]=self["webpackChunksos_dash"]||[]).push([[693],{31555:(e,a,s)=>{s.r(a),s.d(a,{default:()=>da});var t=s(59835),l=s(60499),o=s(86970),r=s(25121),n=s(84278),d=s(89906),i=s(88900),u=s(69036),b=function(e,a,s,t){function l(e){return e instanceof s?e:new s((function(a){a(e)}))}return new(s||(s=Promise))((function(s,o){function r(e){try{d(t.next(e))}catch(a){o(a)}}function n(e){try{d(t["throw"](e))}catch(a){o(a)}}function d(e){e.done?s(e.value):l(e.value).then(r,n)}d((t=t.apply(e,a||[])).next())}))};class m extends u.Z{getDatabases(e){return b(this,void 0,void 0,(function*(){return this.request.get(`/v1/database/${e}/`)}))}createDatabase(e,a){return b(this,void 0,void 0,(function*(){return this.request.post(`/v1/database/${e}/`,a)}))}deleteDatabase(e,a){return b(this,void 0,void 0,(function*(){return this.request.delete(`/v1/database/${e}/${a}/`)}))}createDatabaseUser(e,a,s){return b(this,void 0,void 0,(function*(){return this.request.post(`/v1/database/${e}/${a}/user/`,s)}))}deleteDatabaseUser(e,a,s){return b(this,void 0,void 0,(function*(){return this.request.delete(`/v1/database/${e}/${a}/user/${s}/`)}))}}var c=s(3746);const g=(0,c.Q_)("databasesStatus",{state:()=>({selectedTab:"mysql",keyDatabasesMysqlTable:0,keyDatabasesPostgresTable:0}),getters:{getSelectedTab(e){return e.selectedTab},getKeyDatabasesMysqlTable(e){return e.keyDatabasesMysqlTable},getKeyDatabasesPostgresTable(e){return e.keyDatabasesPostgresTable}},actions:{setSelectedTab(e){this.selectedTab=e},setKeyDatabasesMysqlTable(e){this.keyDatabasesMysqlTable=e},setKeyDatabasesPostgresTable(e){this.keyDatabasesPostgresTable=e}}}),p=(0,t.aZ)({__name:"DatabasesDialogRemoveDatabase",props:{showDialogRemoveDatabase:{type:Boolean},databaseName:{},databaseType:{}},emits:["update:showDialogRemoveDatabase"],setup(e,{emit:a}){const s=e,o=(0,r.QT)().t,u=g(),b=(0,l.iH)(s.showDialogRemoveDatabase),c=(0,t.Fl)({get:()=>u.getKeyDatabasesMysqlTable,set:e=>{u.setKeyDatabasesMysqlTable(e)}}),p=(0,t.Fl)({get:()=>u.getKeyDatabasesPostgresTable,set:e=>{u.setKeyDatabasesPostgresTable(e)}});function v(){const e=new m;e.deleteDatabase(s.databaseType.toLowerCase(),s.databaseName).then((()=>{(0,i.LX)(`${o("databasesDialogRemove.messageRemoveSuccess",{database:s.databaseName})}`),"mysql"===s.databaseType.toLowerCase()?c.value++:p.value++,b.value=!1})).catch((e=>{console.error(e),(0,i.s9)(e.response.data,`${o("databasesDialogRemove.messageRemoveError",{database:s.databaseName})}`)}))}return(0,t.YP)((()=>s.showDialogRemoveDatabase),(e=>{b.value=e})),(0,t.YP)((()=>b.value),(e=>{a("update:showDialogRemoveDatabase",e)})),(e,a)=>((0,t.wg)(),(0,t.j4)(d.Z,{showDeleteDialog:b.value,"onUpdate:showDeleteDialog":a[2]||(a[2]=e=>b.value=e),titleDialog:e.$t("databasesDialogRemove.messageConfirmRemove"),messageToDelete:e.$t("databasesDialogRemove.messageConfirmRemove",{databaseName:e.databaseName}),warningToDelete:e.$t("databasesDialogRemove.warningRemoveDatabase"),customStyle:{"min-width":"775px"}},{"card-actions":(0,t.w5)((()=>[(0,t.Wm)(n.Z,{label:e.$t("databasesDialogRemove.btnCancel"),color:"grey-7",onClick:a[0]||(a[0]=e=>b.value=!1)},null,8,["label"]),(0,t.Wm)(n.Z,{color:"negative",label:e.$t("databasesDialogRemove.btnRemove"),onClick:a[1]||(a[1]=e=>v())},null,8,["label"])])),_:1},8,["showDeleteDialog","titleDialog","messageToDelete","warningToDelete"]))}}),v=p,w=v;var y=s(19302);const D=(0,t.aZ)({__name:"DatabasesRemoveDatabase",props:{databaseName:{},databaseType:{}},setup(e){const a=(0,l.iH)(!1),s=(0,t.Fl)((()=>{const e=(0,y.Z)();return e.dark.isActive?"/icons/bomb_dark.svg":"/icons/bomb_light.svg"}));return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(w,{showDialogRemoveDatabase:a.value,"onUpdate:showDialogRemoveDatabase":l[0]||(l[0]=e=>a.value=e),databaseName:e.databaseName,databaseType:e.databaseType,imagePath:s.value},null,8,["showDialogRemoveDatabase","databaseName","databaseType","imagePath"]),(0,t.Wm)(n.Z,{icon:"sym_s_delete",class:"q-mr-md",color:"negative",colorTooltip:"bg-negative",textTooltip:e.$t("databasesRemoveDatabase.tooltipRemove"),onClick:l[1]||(l[1]=e=>a.value=!0),style:{"font-size":"12px"},label:""},null,8,["textTooltip"])]))}}),U=D,h=U;var _=s(15521);const T={class:"flex justify-between items-center"},f={class:"title-dialog"},q=(0,t.aZ)({__name:"DatabasesDialogCreateDatabase",props:{showDialogCreateDatabase:{type:Boolean},databaseType:{default:"MySQL"}},emits:["update:showDialogCreateDatabase"],setup(e,{emit:a}){const s=e,d=(0,r.QT)().t,u=g(),b=(0,l.iH)(s.showDialogCreateDatabase),c=(0,l.iH)(""),p=(0,t.Fl)({get:()=>u.getKeyDatabasesMysqlTable,set:e=>{u.setKeyDatabasesMysqlTable(e)}}),v=(0,t.Fl)({get:()=>u.getKeyDatabasesPostgresTable,set:e=>{u.setKeyDatabasesPostgresTable(e)}});function w(){const e=new m;e.createDatabase(s.databaseType.toLowerCase(),{dbName:c.value}).then((()=>{(0,i.LX)(`${d("databasesDialogCreate.createDataBaseSuccess",{database:c.value})}`),"MySQL"===s.databaseType?p.value++:v.value++,c.value="",b.value=!1})).catch((e=>{console.error(e),(0,i.s9)(e.response.data,`${d("databasesDialogCreate.createDataBaseError",{database:c.value})}`)}))}return(0,t.YP)(b,(e=>{a("update:showDialogCreateDatabase",e)})),(0,t.YP)((()=>s.showDialogCreateDatabase),(e=>{b.value=e})),(e,a)=>{const s=(0,t.up)("q-btn"),l=(0,t.up)("q-card-section"),r=(0,t.up)("q-card-actions"),d=(0,t.up)("q-card"),i=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(i,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"dialog-card-bg",style:{width:"700px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t._)("div",T,[(0,t._)("div",f,(0,o.zw)(e.$t("databasesDialogCreate.titleDialogCreate"))+" "+(0,o.zw)(e.databaseType),1),(0,t.Wm)(s,{icon:"sym_s_close",flat:"",round:"",dense:"",onClick:a[0]||(a[0]=e=>(b.value=!1,c.value=""))})]),(0,t.Wm)(l,{class:"q-mb-md q-px-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(_.Z,{label:e.$t("databasesDialogCreate.inputDataBaseName"),icon:"sym_s_database",value:c.value,"onUpdate:value":a[1]||(a[1]=e=>c.value=e),dataCy:"databases-dialog-create-input",maxLength:"32",minLength:"4",isError:/\W/i.test(c.value),msgError:e.$t("databasesDialogCreate.messageValidateError")},null,8,["label","value","isError","msgError"])])),_:1}),(0,t.Wm)(r,{align:"between",class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(n.Z,{label:e.$t("databasesDialogCreate.btnCancel"),color:"grey-7",onClick:a[2]||(a[2]=e=>(b.value=!1,c.value=""))},null,8,["label"]),(0,t.Wm)(n.Z,{icon:"sym_s_database",disable:c.value.length<4||/\W/i.test(c.value),label:e.$t("databasesDialogCreate.btnCreateDataBase"),color:"primary",onClick:a[3]||(a[3]=e=>w())},null,8,["disable","label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});var C=s(32074),W=s(44458),P=s(68879),Z=s(63190),k=s(11821),x=s(69984),Q=s.n(x);const R=q,$=R;Q()(q,"components",{QDialog:C.Z,QCard:W.Z,QBtn:P.Z,QCardSection:Z.Z,QCardActions:k.Z});var E=s(61957),L=s(27974),S=s(26557),H=s(87713),N=s(63064);class M{constructor(){this.privilegesMySQL=["ALTER","ALTER ROUTINE","CREATE","CREATE ROUTINE","CREATE TEMPORARY TABLES","CREATE VIEW","DELETE","DROP","EVENT","EXECUTE","INDEX","INSERT","LOCK TABLES","REFERENCES","SELECT","SHOW VIEW","TRIGGER","UPDATE"],this.privilegesPostgreSQL=["ALL PRIVILEGES"]}getPrivilegesMySQL(){return this.privilegesMySQL}getPrivilegesPostgreSQL(){return this.privilegesPostgreSQL}formatSelectedPrivileges(e){return e.map((e=>e.replace(/ /g,"-").toLowerCase()))}}var V=function(e,a,s,t){function l(e){return e instanceof s?e:new s((function(a){a(e)}))}return new(s||(s=Promise))((function(s,o){function r(e){try{d(t.next(e))}catch(a){o(a)}}function n(e){try{d(t["throw"](e))}catch(a){o(a)}}function d(e){e.done?s(e.value):l(e.value).then(r,n)}d((t=t.apply(e,a||[])).next())}))};const I={class:"flex justify-between items-center"},K={class:"title-dialog"},A={class:"row"},z=(0,t.aZ)({__name:"DatabasesDialogCreateUser",props:{showDialogCreateUser:{type:Boolean},databaseType:{},databasesList:{}},emits:["update:showDialogCreateUser"],setup(e,{emit:a}){const s=e,d=(0,r.QT)().t,u=g(),b=(0,l.iH)(s.showDialogCreateUser),c=(0,l.iH)([]),p=(0,l.iH)([]),v=(0,l.iH)(""),w=(0,l.iH)(""),y=(0,l.iH)(!1),D=(0,l.iH)([]),U=(0,l.iH)(!1),h=(0,l.iH)([]),T=(0,t.Fl)((()=>y.value&&v.value.length>=4&&!/\W/i.test(v.value)&&p.value.length>=1)),f=(0,t.Fl)({get:()=>u.getKeyDatabasesMysqlTable,set:e=>{u.setKeyDatabasesMysqlTable(e)}}),q=(0,t.Fl)({get:()=>u.getKeyDatabasesPostgresTable,set:e=>{u.setKeyDatabasesPostgresTable(e)}});function C(){b.value=!1}function W(){return V(this,void 0,void 0,(function*(){let e=!1;for(let a of p.value)yield P(a).then((e=>{(0,i.LX)(e)})).catch((a=>{e=!0,console.error(a),(0,i.s9)(a.error,a.msgDefault)}));e||(setTimeout((()=>{C()}),1e3),"mysql"===s.databaseType?f.value++:q.value++)}))}function P(e){return new Promise(((a,t)=>{const l=new m;l.createDatabaseUser(s.databaseType,e,{password:w.value,username:v.value,dbName:e,privileges:!1===U.value?(new M).formatSelectedPrivileges(D.value):["all"]}).then((()=>{a(`${d("databasesDialogCreateUser.messageCreateUserSuccess",{user:v.value})}`)})).catch((e=>{console.error(e);const a={error:e.response.data,msgDefault:`${d("databasesDialogCreateUser.messageCreateUserError",{user:v.value})}`};t(a)}))}))}return(0,t.wF)((()=>{U.value=!0,h.value=(new M).getPrivilegesPostgreSQL(),"mysql"===s.databaseType&&(h.value=(new M).getPrivilegesMySQL())})),(0,t.YP)(U,(e=>{!1!==e&&(D.value=h.value)})),(0,t.YP)(D,(e=>{U.value=e.length===h.value.length})),(0,t.YP)(b,(e=>{a("update:showDialogCreateUser",e)})),(0,t.YP)((()=>s.showDialogCreateUser),(e=>{b.value=e})),(0,t.YP)((()=>s.databasesList),(e=>{c.value=[],e.forEach((e=>{c.value.push({value:e.name,label:e.name})}))}),{immediate:!0}),(e,a)=>{const s=(0,t.up)("q-btn"),l=(0,t.up)("q-card-section"),r=(0,t.up)("q-toggle"),d=(0,t.up)("q-card"),i=(0,t.up)("q-expansion-item"),u=(0,t.up)("AlertsWarning"),m=(0,t.up)("q-card-actions"),g=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(g,{modelValue:b.value,"onUpdate:modelValue":a[10]||(a[10]=e=>b.value=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"dialog-card-bg",style:{width:"750px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t._)("div",I,[(0,t._)("div",K,(0,o.zw)(e.$t("databasesDialogCreateUser.titleDialogCreateUser")),1),(0,t.Wm)(s,{icon:"sym_s_close",flat:"",round:"",dense:"",onClick:a[0]||(a[0]=e=>C())})]),(0,t.Wm)(l,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(L.Z,{selected:p.value,"onUpdate:selected":a[1]||(a[1]=e=>p.value=e),label:e.$t("databasesDialogCreateUser.textSelectDatabases"),icon:"sym_s_database",options:c.value},null,8,["selected","label","options"])])),_:1}),(0,t.Wm)(l,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(_.Z,{class:"q-mb-lg",label:e.$t("databasesDialogCreateUser.inputUsername"),icon:"sym_s_person",value:v.value,"onUpdate:value":a[2]||(a[2]=e=>v.value=e),dataCy:"databases-dialog-create-user-input",maxLength:"32",minLength:"4",isError:/\W/i.test(v.value),msgError:e.$t("databasesDialogCreateUser.messageInputError")},null,8,["label","value","isError","msgError"]),(0,t.Wm)(S.Z,{password:w.value,"onUpdate:password":a[3]||(a[3]=e=>w.value=e),minLength:16,dataCyInput:"databases-dialog-create-password-input"},null,8,["password"]),(0,t.Wm)(H.Z,{"onUpdate:password":a[4]||(a[4]=e=>w.value=e),class:"float-right",dataCy:"databases-dialog-create-generate-password"})])),_:1}),(0,t.Wm)(l,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(N.Z,{password:w.value,isValidPassword:y.value,"onUpdate:isValidPassword":a[5]||(a[5]=e=>y.value=e)},null,8,["password","isValidPassword"]),[[E.F8,w.value]])])),_:1}),"mysql"===e.databaseType?((0,t.wg)(),(0,t.j4)(l,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:e.$t("databasesDialogCreateUser.textPrivileges"),icon:"sym_s_person_add",class:"databases-label-expansion-item","expand-icon":"sym_s_expand_more","expanded-icon":"sym_s_expand_less"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{color:"primary",class:"text-subtitle1 text-bold",label:e.$t("databasesDialogCreateUser.toggleSelectAll"),modelValue:U.value,"onUpdate:modelValue":a[6]||(a[6]=e=>U.value=e),"left-label":"","checked-icon":"sym_s_check","unchecked-icon":"sym_s_close"},null,8,["label","modelValue"]),(0,t._)("div",A,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(h.value,((e,s)=>((0,t.wg)(),(0,t.j4)(r,{key:s,color:"primary",class:"col-4",label:e,modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=e=>D.value=e),val:e},null,8,["label","modelValue","val"])))),128))])])),_:1})])),_:1},8,["label"])])),_:1})):((0,t.wg)(),(0,t.j4)(l,{key:1},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{showAlertsWarning:!0,message:e.$t("databasesDialogUpdateUser.textPostgresPrivileges"),class:"q-mt-md"},null,8,["message"])])),_:1})),(0,t.Wm)(m,{align:"between"},{default:(0,t.w5)((()=>[(0,t.Wm)(n.Z,{label:e.$t("databasesDialogCreateUser.btnCancel"),color:"grey-7",onClick:a[8]||(a[8]=e=>C())},null,8,["label"]),(0,t.Wm)(n.Z,{icon:"sym_s_person_add",disable:!T.value,label:e.$t("databasesDialogCreateUser.btnCreateUser"),color:"primary",onClick:a[9]||(a[9]=e=>W())},null,8,["disable","label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});var j=s(50651),F=s(23175),Y=s(490);const B=z,O=B;Q()(z,"components",{QDialog:C.Z,QCard:W.Z,QBtn:P.Z,QCardSection:Z.Z,QExpansionItem:j.Z,QToggle:F.Z,QCardActions:k.Z,QItem:Y.Z});const X=(0,t.aZ)({__name:"DatabasesDialogRemoveUser",props:{showDialogRemoveUser:{type:Boolean},databaseUsername:{},databaseName:{},databaseType:{}},emits:["update:showDialogRemoveUser"],setup(e,{emit:a}){const s=e,o=(0,r.QT)().t,u=g(),b=(0,l.iH)(s.showDialogRemoveUser),c=(0,t.Fl)({get:()=>u.getKeyDatabasesMysqlTable,set:e=>{u.setKeyDatabasesMysqlTable(e)}}),p=(0,t.Fl)({get:()=>u.getKeyDatabasesPostgresTable,set:e=>{u.setKeyDatabasesPostgresTable(e)}});function v(){const e=new m;e.deleteDatabaseUser(s.databaseType,s.databaseName,s.databaseUsername).then((()=>{(0,i.LX)(`${o("databasesDialogRemoveUser.messageRemoveUserSuccess",{user:s.databaseUsername})}`),"mysql"===s.databaseType?c.value++:p.value++,b.value=!1})).catch((e=>{console.error(e),(0,i.s9)(e.response.data,`${o("databasesDialogRemoveUser.messageRemoveUserError",{user:s.databaseUsername})}`)}))}return(0,t.YP)((()=>s.showDialogRemoveUser),(e=>{b.value=e})),(0,t.YP)((()=>b.value),(e=>{a("update:showDialogRemoveUser",e)})),(e,a)=>((0,t.wg)(),(0,t.j4)(d.Z,{showDeleteDialog:b.value,"onUpdate:showDeleteDialog":a[2]||(a[2]=e=>b.value=e),titleDialog:e.$t("databasesDialogRemoveUser.titleDialogRemoveUser",{user:e.databaseUsername}),messageToDelete:e.$t("databasesDialogRemoveUser.messageConfirmRemove",{username:e.databaseUsername}),warningToDelete:e.$t("databasesDialogRemoveUser.warningRemoveUser"),customStyle:{"min-width":"650px"}},{"card-actions":(0,t.w5)((()=>[(0,t.Wm)(n.Z,{label:e.$t("databasesDialogRemoveUser.btnCancel"),color:"grey-7",onClick:a[0]||(a[0]=e=>b.value=!1)},null,8,["label"]),(0,t.Wm)(n.Z,{color:"negative",label:e.$t("databasesDialogRemoveUser.btnRemove"),onClick:a[1]||(a[1]=e=>v())},null,8,["label"])])),_:1},8,["showDeleteDialog","titleDialog","messageToDelete","warningToDelete"]))}}),G=X,J=G,ee=["innerHTML"],ae=["innerHTML"],se=(0,t.aZ)({__name:"AlertsWarning",props:{showAlertsWarning:{type:Boolean,default:!1},message:{default:""},smallText:{default:""}},setup(e){return(e,a)=>{const s=(0,t.up)("q-icon"),l=(0,t.up)("q-banner");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(E.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,t.w5)((()=>[e.showAlertsWarning?((0,t.wg)(),(0,t.j4)(l,{key:0,dense:"","inline-actions":"",class:"q-mb-lg text-black bg-warning"},{avatar:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"sym_s_warning",color:"black"})])),default:(0,t.w5)((()=>[(0,t._)("div",{class:"text-subtitle1",innerHTML:e.message},null,8,ee),(0,t._)("small",{innerHTML:e.smallText},null,8,ae)])),_:1})):(0,t.kq)("",!0)])),_:1})])}}});var te=s(47128),le=s(22857);const oe=se,re=oe;Q()(se,"components",{QBanner:te.Z,QIcon:le.Z});const ne={class:"flex justify-between items-center"},de={class:"title-dialog"},ie={class:"text-subtitle1"},ue={class:"text-bold"},be={class:"row"},me=(0,t.aZ)({__name:"DatabasesDialogUpdateUser",props:{showDialogUpdateUser:{type:Boolean},databaseType:{},databaseName:{},databaseUser:{}},emits:["update:showDialogUpdateUser"],setup(e,{emit:a}){const s=e,d=(0,r.QT)().t,u=g(),b=(0,l.iH)(s.showDialogUpdateUser),c=(0,l.iH)([]),p=(0,l.iH)(""),v=(0,l.iH)(!1),w=(0,l.iH)([]),y=(0,l.iH)(!1),D=(0,t.Fl)((()=>v.value&&s.databaseUser.username.length>=4&&!/\W/i.test(s.databaseUser.username))),U=(0,t.Fl)({get:()=>u.getKeyDatabasesMysqlTable,set:e=>{u.setKeyDatabasesMysqlTable(e)}}),h=(0,t.Fl)({get:()=>u.getKeyDatabasesPostgresTable,set:e=>{u.setKeyDatabasesPostgresTable(e)}});function T(){p.value="",c.value=[],b.value=!1}function f(){switch(s.databaseType){case"mysql":w.value=(new M).getPrivilegesMySQL();break;case"postgresql":w.value=(new M).getPrivilegesPostgreSQL();break}}function q(){const e=new m;e.deleteDatabaseUser(s.databaseType,s.databaseName,s.databaseUser.username).then((()=>{e.createDatabaseUser(s.databaseType,s.databaseName,{password:p.value,dbName:s.databaseName,privileges:!1===y.value?(new M).formatSelectedPrivileges(c.value):["all"],username:s.databaseUser.username}).then((()=>{(0,i.LX)(d("databasesDialogUpdateUser.messageUpdateUserSuccess",{user:s.databaseUser.username})),T()}))})).catch((e=>{console.error(e),(0,i.s9)(e.response.data,d("databasesDialogUpdateUser.messageUpdateUserError",{user:s.databaseUser.username}))})).finally((()=>{setTimeout((()=>{"mysql"===s.databaseType?U.value++:h.value++}),1e3)}))}return(0,t.YP)((()=>s.showDialogUpdateUser),(e=>{b.value=e})),(0,t.YP)(b,(e=>{a("update:showDialogUpdateUser",e)})),(0,t.YP)(y,(e=>{!1!==e&&(c.value=w.value)})),(0,t.YP)(c,(e=>{y.value=e.length===w.value.length})),(0,t.wF)((()=>{c.value=s.databaseUser.privileges.map((e=>e.replace(/-/g," ").toUpperCase())),f(),y.value=c.value.includes("ALL PRIVILEGES")})),(e,a)=>{const s=(0,t.up)("q-btn"),r=(0,t.up)("q-card-section"),i=(0,t.up)("q-toggle"),u=(0,t.up)("q-card"),m=(0,t.up)("q-expansion-item"),g=(0,t.up)("q-card-actions"),U=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(U,{modelValue:b.value,"onUpdate:modelValue":a[8]||(a[8]=e=>b.value=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"dialog-card-bg",style:{width:"750px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t._)("div",ne,[(0,t._)("div",de,(0,o.zw)(e.$t("databasesDialogUpdateUser.titleDialogUpdateUser",{user:e.databaseUser.username})),1),(0,t.Wm)(s,{icon:"sym_s_close",flat:"",round:"",dense:"",onClick:a[0]||(a[0]=e=>T())})]),(0,t.Wm)(r,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t._)("div",ie,[(0,t.Uk)((0,o.zw)(e.$t("databasesDialogUpdateUser.subtitleDialogUpdateUser",{type:e.databaseType}))+": ",1),(0,t._)("span",ue,(0,o.zw)(e.databaseName),1),(0,t.Wm)(re,{showAlertsWarning:!0,message:e.$t("databasesDialogUpdateUser.textAlertMessage"),class:"q-mt-md"},null,8,["message"])]),(0,t.Wm)(_.Z,{class:"q-mb-md",label:e.$t("databasesDialogUpdateUser.inputName"),icon:"sym_s_person",value:e.databaseUser.username,dataCy:"databases-dialog-update-user-input",disable:!0},null,8,["label","value"]),(0,t.Wm)(S.Z,{minLength:16,password:p.value,"onUpdate:password":a[1]||(a[1]=e=>p.value=e),dataCyInput:"databases-dialog-update-password-input"},null,8,["password"]),(0,t.Wm)(H.Z,{password:p.value,"onUpdate:password":a[2]||(a[2]=e=>p.value=e),class:"float-right",dataCy:"databases-dialog-update-generate-password"},null,8,["password"])])),_:1}),(0,t.Wm)(r,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(N.Z,{password:p.value,"onUpdate:isValidPassword":a[3]||(a[3]=e=>v.value=e)},null,8,["password"]),[[E.F8,p.value]])])),_:1}),"mysql"===e.databaseType?((0,t.wg)(),(0,t.j4)(r,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:e.$t("databasesDialogUpdateUser.textPrivileges"),icon:"sym_s_people",class:"databases-label-expansion-item"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{color:"primary",class:"text-subtitle1 text-bold",label:e.$t("databasesDialogUpdateUser.toggleSelectAll"),modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value=e),"left-label":"","checked-icon":"sym_s_check","unchecked-icon":"sym_s_close"},null,8,["label","modelValue"]),(0,t._)("div",be,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(w.value,((e,s)=>((0,t.wg)(),(0,t.j4)(i,{key:s,color:"primary",class:"col-4",label:e,modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=e=>c.value=e),val:e},null,8,["label","modelValue","val"])))),128))])])),_:1})])),_:1},8,["label"])])),_:1})):((0,t.wg)(),(0,t.j4)(r,{key:1},{default:(0,t.w5)((()=>[(0,t.Wm)(re,{showAlertsWarning:!0,message:e.$t("databasesDialogUpdateUser.textPostgresPrivileges"),class:"q-mt-md"},null,8,["message"])])),_:1})),(0,t.Wm)(g,{align:"between"},{default:(0,t.w5)((()=>[(0,t.Wm)(n.Z,{label:e.$t("databasesDialogUpdateUser.btnCancel"),color:"grey-7",onClick:a[6]||(a[6]=e=>T())},null,8,["label"]),(0,t.Wm)(n.Z,{icon:"sym_s_person",disable:!D.value,label:(0,l.SU)(d)("databasesDialogUpdateUser.btnUpdateUser"),color:"primary",onClick:a[7]||(a[7]=e=>q())},null,8,["disable","label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ce=me,ge=ce;Q()(me,"components",{QDialog:C.Z,QCard:W.Z,QBtn:P.Z,QCardSection:Z.Z,QExpansionItem:j.Z,QToggle:F.Z,QCardActions:k.Z,QItem:Y.Z});const pe=(0,t.aZ)({__name:"DatabasesUsersActions",props:{databaseUser:{},databaseName:{}},setup(e){const a=(0,l.iH)(!1),s=(0,l.iH)(!1),r=(0,l.iH)(1e3),n=(0,t.Fl)((()=>{const e=(0,y.Z)();return e.dark.isActive?"/icons/bomb_dark.svg":"/icons/bomb_light.svg"}));return(e,l)=>{const d=(0,t.up)("q-tooltip"),i=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(),(0,t.j4)(ge,{showDialogUpdateUser:a.value,"onUpdate:showDialogUpdateUser":l[0]||(l[0]=e=>a.value=e),databaseName:e.databaseName,databaseType:e.databaseUser.dbType,databaseUser:e.databaseUser,key:r.value},null,8,["showDialogUpdateUser","databaseName","databaseType","databaseUser"])),(0,t.Wm)(J,{showDialogRemoveUser:s.value,"onUpdate:showDialogRemoveUser":l[1]||(l[1]=e=>s.value=e),databaseName:e.databaseName,databaseType:e.databaseUser.dbType,databaseUsername:e.databaseUser.username,imagePath:n.value},null,8,["showDialogRemoveUser","databaseName","databaseType","databaseUsername","imagePath"]),(0,t.Wm)(i,{round:"",color:"primary",outline:"",icon:"sym_s_edit",size:"sm",class:"q-mr-md",onClick:l[2]||(l[2]=e=>(r.value++,a.value=!0))},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"bg-primary",style:{"font-size":"14px"},offset:[10,10]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("databasesUsersActions.tooltipEditUser")),1)])),_:1})])),_:1}),(0,t.Wm)(i,{round:"",color:"negative",icon:"sym_s_delete",size:"sm",onClick:l[3]||(l[3]=e=>s.value=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"bg-negative",style:{"font-size":"14px"},offset:[10,10]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("databasesUsersActions.tooltipRemoveUser")),1)])),_:1})])),_:1})])}}});var ve=s(46858);const we=pe,ye=we;Q()(pe,"components",{QBtn:P.Z,QTooltip:ve.Z});const De={class:"text-left"},Ue={class:"text-right"},he=(0,t.aZ)({__name:"DatabasesUsers",props:{databaseUsers:{},databaseName:{},databaseType:{}},setup(e){return(e,a)=>{const s=(0,t.up)("q-markup-table");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(s,{separator:"none",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.databaseUsers,((a,s)=>((0,t.wg)(),(0,t.iD)("tr",{key:s},[(0,t._)("td",De,(0,o.zw)(a.username),1),(0,t._)("td",Ue,[(0,t.Wm)(ye,{databaseUser:a,databaseName:e.databaseName},null,8,["databaseUser","databaseName"])])])))),128))])])),_:1})])}}});var _e=s(66933);const Te=he,fe=Te;Q()(he,"components",{QMarkupTable:_e.Z});const qe={class:"row justify-center q-mt-md"},Ce=(0,t.aZ)({__name:"DatabasesTable",props:{tableTitle:{},data:{}},setup(e){const a=e,s=(0,r.QT)().t,d=(0,l.iH)(!1),i=(0,l.iH)(0),u=(0,l.iH)(!1),b=(0,l.iH)(""),m=(0,l.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),c=[{name:"name",required:!0,label:s("databasesTable.databaseName"),align:"left",field:"name",classes:"component-table-td-main ellipsis",headerClasses:"bg-primary text-white",sortable:!0}],g=(0,t.Fl)((()=>Math.ceil(a.data.length/m.value.rowsPerPage)));return(e,a)=>{const s=(0,t.up)("q-icon"),l=(0,t.up)("q-input"),r=(0,t.up)("q-space"),p=(0,t.up)("q-th"),v=(0,t.up)("q-tr"),w=(0,t.up)("q-td"),y=(0,t.up)("q-table"),D=(0,t.up)("q-pagination");return(0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(),(0,t.j4)(O,{showDialogCreateUser:d.value,"onUpdate:showDialogCreateUser":a[0]||(a[0]=e=>d.value=e),databasesList:e.data,databaseType:e.tableTitle.toLowerCase(),key:i.value},null,8,["showDialogCreateUser","databasesList","databaseType"])),(0,t.Wm)($,{showDialogCreateDatabase:u.value,"onUpdate:showDialogCreateDatabase":a[1]||(a[1]=e=>u.value=e),databaseType:e.tableTitle},null,8,["showDialogCreateDatabase","databaseType"]),(0,t.Wm)(y,{rows:e.data,columns:c,"row-key":"key",color:"primary",flat:"",bordered:"",pagination:m.value,"onUpdate:pagination":a[5]||(a[5]=e=>m.value=e),"no-data-label":e.$t("databasesTable.notFoundDatabases"),filter:b.value,"hide-pagination":""},{top:(0,t.w5)((()=>[(0,t.Wm)(l,{borderless:"",class:"bg-transparent",debounce:"300",color:"primary",modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value=e),label:e.$t("databasesTable.search")},{prepend:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"sym_s_search"})])),_:1},8,["modelValue","label"]),(0,t.Wm)(r),(0,t.Wm)(n.Z,{icon:"sym_s_person_add",label:e.$t("databasesTable.btnCreateUser"),onClick:a[3]||(a[3]=e=>d.value=!0),class:"q-mx-md"},null,8,["label"]),(0,t.Wm)(n.Z,{color:"primary",label:e.$t("databasesTable.btnCreateDatabase"),onClick:a[4]||(a[4]=e=>u.value=!0),icon:"sym_s_database"},null,8,["label"])])),header:(0,t.w5)((a=>[(0,t.Wm)(v,{props:a},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.cols,(e=>((0,t.wg)(),(0,t.j4)(p,{key:e.name,props:a,style:{"font-weight":"bold","font-size":"14px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["props"])))),128)),(0,t.Wm)(p,{"data-cy":"database-users-th",style:{"font-weight":"bold","font-size":"14px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("databasesTable.databaseUsers")),1)])),_:1}),(0,t.Wm)(p,{"data-cy":"database-size-th",style:{"font-weight":"bold","font-size":"14px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("databasesTable.databaseSize")),1)])),_:1}),(0,t.Wm)(p,{"data-cy":"database-custom-th"})])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[(0,t.Wm)(v,{props:a},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.cols,(e=>((0,t.wg)(),(0,t.j4)(w,{key:e.name,props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(fe,{databaseName:a.row.name,databaseUsers:a.row.users,databaseType:a.row.type},null,8,["databaseName","databaseUsers","databaseType"])])),_:2},1024),(0,t.Wm)(w,{class:"text-center",style:{width:"100px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((a.row.size/1024).toFixed()),1)])),_:2},1024),(0,t.Wm)(w,{class:"text-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{databaseName:a.row.name,databaseType:e.tableTitle},null,8,["databaseName","databaseType"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","pagination","no-data-label","filter"]),(0,t._)("div",qe,[(0,t.Wm)(D,{modelValue:m.value.page,"onUpdate:modelValue":a[6]||(a[6]=e=>m.value.page=e),color:"primary",max:g.value,size:"md"},null,8,["modelValue","max"])])])}}});var We=s(84277),Pe=s(13119),Ze=s(90136),ke=s(31233),xe=s(21682),Qe=s(67220),Re=s(80996);const $e=Ce,Ee=$e;Q()(Ce,"components",{QTable:We.Z,QInput:Pe.Z,QIcon:le.Z,QSpace:Ze.Z,QTr:ke.Z,QTh:xe.Z,QTd:Qe.Z,QPagination:Re.Z});const Le={class:"databases-th-bg"},Se={colspan:"2",class:"databases-th-font"},He={class:"text-bold"},Ne={class:"text-bold"},Me=(0,t.aZ)({__name:"DatabasesConnectionInfo",setup(e){const a=(0,r.QT)().t,s=(0,l.iH)({ipAddress:`${a("databasesConnectionInfo.localhost")}`,port:"3306",title:`${a("databasesConnectionInfo.dataLocal")}`,connectionType:"local"});return(e,a)=>{const l=(0,t.up)("q-markup-table");return(0,t.wg)(),(0,t.j4)(l,{dense:"",flat:"",bordered:"",separator:"cell",class:"databases-space-35 hidden"},{default:(0,t.w5)((()=>[(0,t._)("thead",Le,[(0,t._)("tr",null,[(0,t._)("th",Se,(0,o.zw)(s.value.title),1)])]),(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",He,(0,o.zw)(e.$t("databasesConnectionInfo.tdIpAddress")),1),(0,t._)("td",null,(0,o.zw)(s.value.ipAddress),1)]),(0,t._)("tr",null,[(0,t._)("td",Ne,(0,o.zw)(e.$t("databasesConnectionInfo.tdPort")),1),(0,t._)("td",null,(0,o.zw)(s.value.port),1)])])])),_:1})}}}),Ve=Me,Ie=Ve;Q()(Me,"components",{QMarkupTable:_e.Z});var Ke=s(35274);const Ae={key:0},ze={key:1},je={class:"flex justify-end q-mt-md"},Fe={key:0},Ye={key:1},Be={class:"flex justify-end q-mt-md"},Oe=(0,t.aZ)({__name:"DatabasesTabs",props:{mysqlDatabases:{},postgresqlDatabases:{},hasInstalledMysqlDatabase:{type:Boolean},hasInstalledPostgresDatabase:{type:Boolean}},setup(e){const a=g(),s=(0,l.iH)(!1),o=(0,l.iH)(!1),r=(0,t.Fl)({get:()=>a.getSelectedTab,set:e=>{a.setSelectedTab(e)}}),n=(0,t.Fl)({get:()=>a.getKeyDatabasesMysqlTable,set:e=>{a.setKeyDatabasesMysqlTable(e)}}),d=(0,t.Fl)({get:()=>a.getKeyDatabasesPostgresTable,set:e=>{a.setKeyDatabasesPostgresTable(e)}});return(0,t.YP)(s,(e=>{!0===e&&setTimeout((()=>{d.value++}),1e3)})),(0,t.YP)(o,(e=>{!0===e&&setTimeout((()=>{n.value++}),5e3)})),(e,a)=>{const l=(0,t.up)("q-tab"),i=(0,t.up)("q-tabs"),u=(0,t.up)("q-separator"),b=(0,t.up)("q-tab-panel"),m=(0,t.up)("q-tab-panels");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(i,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),"active-color":"primary","indicator-color":"primary",align:"justify",class:"text-grey","no-caps":""},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{name:"mysql",label:"MySQL/MariaDB/Percona",class:"databases-tabs",icon:"sym_s_database"}),(0,t.Wm)(l,{name:"postgres",label:"PostgreSQL",class:"databases-tabs",icon:"sym_s_database"})])),_:1},8,["modelValue"]),(0,t.Wm)(u),(0,t.Wm)(m,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),animated:"","keep-alive":""},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{name:"mysql"},{default:(0,t.w5)((()=>[!1===e.hasInstalledMysqlDatabase?((0,t.wg)(),(0,t.iD)("div",Ae,[(0,t.Wm)(Ke.Z,{serviceName:"MariaDB","onUpdate:isInstalledService":a[1]||(a[1]=e=>o.value=e)})])):((0,t.wg)(),(0,t.iD)("div",ze,[((0,t.wg)(),(0,t.j4)(Ee,{tableTitle:"MySQL",data:e.mysqlDatabases,key:n.value},null,8,["data"])),(0,t._)("div",je,[(0,t.Wm)(Ie,{style:{width:"25%"}})])]))])),_:1}),(0,t.Wm)(b,{name:"postgres"},{default:(0,t.w5)((()=>[!1===e.hasInstalledPostgresDatabase?((0,t.wg)(),(0,t.iD)("div",Fe,[(0,t.Wm)(Ke.Z,{serviceName:"Postgres","onUpdate:isInstalledService":a[2]||(a[2]=e=>s.value=e)})])):((0,t.wg)(),(0,t.iD)("div",Ye,[((0,t.wg)(),(0,t.j4)(Ee,{tableTitle:"PostgreSQL",data:e.postgresqlDatabases,key:d.value},null,8,["data"])),(0,t._)("div",Be,[(0,t.Wm)(Ie,{style:{width:"25%"}})])]))])),_:1})])),_:1},8,["modelValue"])],64)}}});var Xe=s(47817),Ge=s(70900),Je=s(50926),ea=s(89800),aa=s(84106);const sa=Oe,ta=sa;Q()(Oe,"components",{QTabs:Xe.Z,QTab:Ge.Z,QSeparator:Je.Z,QTabPanels:ea.Z,QTabPanel:aa.Z});const la=(0,t.aZ)({__name:"DatabasesIndex",setup(e){const a=(0,r.QT)().t,s=g(),o=new m,n=(0,l.iH)(!1),d=(0,l.iH)(!1),u=(0,l.iH)(!1),b=(0,l.iH)(!1),c=(0,l.iH)([]),p=(0,l.iH)([]),v=(0,t.Fl)((()=>n.value||d.value)),w=(0,t.Fl)({get:()=>s.getKeyDatabasesMysqlTable,set:e=>{s.setKeyDatabasesMysqlTable(e)}}),y=(0,t.Fl)({get:()=>s.getKeyDatabasesPostgresTable,set:e=>{s.setKeyDatabasesPostgresTable(e)}});function D(){h(),U()}function U(){d.value=!0,o.getDatabases("postgres").then((e=>{c.value=[],b.value=!0,null!==e.data.body&&(c.value=e.data.body)})).catch((e=>{console.error(e),b.value=!1,(0,i.s9)(e.response.data,a("databasesIndex.errorLoadingPostgresqlDatabases"))})).finally((()=>{d.value=!1}))}function h(){n.value=!0,o.getDatabases("mysql").then((e=>{p.value=[],u.value=!0,null!==e.data.body&&(p.value=e.data.body)})).catch((e=>{console.error(e),u.value=!1,(0,i.s9)(e.response.data,a("databasesIndex.errorLoadingMysqlDatabases"))})).finally((()=>{n.value=!1}))}return(0,t.wF)((()=>{D()})),(0,t.YP)(w,(()=>{h()})),(0,t.YP)(y,(()=>{U()})),(e,a)=>{const s=(0,t.up)("q-skeleton"),l=(0,t.up)("q-card-section"),o=(0,t.up)("q-card"),r=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(r,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[!0===v.value?((0,t.wg)(),(0,t.j4)(s,{key:0,height:"100%"})):((0,t.wg)(),(0,t.j4)(ta,{key:1,hasInstalledMysqlDatabase:u.value,hasInstalledPostgresDatabase:b.value,mysqlDatabases:p.value,postgresqlDatabases:c.value},null,8,["hasInstalledMysqlDatabase","hasInstalledPostgresDatabase","mysqlDatabases","postgresqlDatabases"]))])),_:1})])),_:1})])),_:1})}}});var oa=s(69885),ra=s(57133);const na=la,da=na;Q()(la,"components",{QPage:oa.Z,QCard:W.Z,QCardSection:Z.Z,QSkeleton:ra.ZP})}}]);