"use strict";(self["webpackChunksos_dash"]=self["webpackChunksos_dash"]||[]).push([[506],{73403:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ve});var l=t(59835),s=t(86970),o=t(60499),n=t(61957),c=t(15521),i=t(84278),u=t(26557),r=t(87713),d=t(63064),p=t(25971),g=t(88900),w=t(3746);const m=(0,w.Q_)("accounts",{state:()=>({keyAccountsTable:0,showUpdatePasswordDialog:!1,showUpdateApiKeyDialog:!1,showDeleteUserDialog:!1,keyUpdatePasswordDialog:0,keyUpdateApiKeyDialog:0,accountSelected:{id:0,groupId:0,username:""}}),getters:{getKeyAccountsTable(e){return e.keyAccountsTable},getShowUpdatePasswordDialog(e){return e.showUpdatePasswordDialog},getShowUpdateApiKeyDialog(e){return e.showUpdateApiKeyDialog},getShowDeleteUserDialog(e){return e.showDeleteUserDialog},getKeyUpdatePasswordDialog(e){return e.keyUpdatePasswordDialog},getKeyUpdateApiKeyDialog(e){return e.keyUpdateApiKeyDialog},getAccountSelected(e){return e.accountSelected}},actions:{setKeyAccountsTable(e){this.keyAccountsTable=e},setShowUpdatePasswordDialog(e){this.showUpdatePasswordDialog=e},setShowUpdateApiKeyDialog(e){this.showUpdateApiKeyDialog=e},setShowDeleteUserDialog(e){this.showDeleteUserDialog=e},setKeyUpdatePasswordDialog(e){this.keyUpdatePasswordDialog=e},setKeyUpdateApiKeyDialog(e){this.keyUpdateApiKeyDialog=e},setAccountSelected(e){this.accountSelected=e}}});var y=t(25121);const D={class:"flex justify-between items-center"},v={class:"title-dialog"},U=(0,l.aZ)({__name:"AccountsCreateUserDialog",props:{showCreateUserDialog:{type:Boolean}},emits:["update:showCreateUserDialog"],setup(e,{emit:a}){const t=e,w=(0,y.QT)().t,U=m(),_=(0,o.iH)(t.showCreateUserDialog),h=(0,o.iH)(""),b=(0,o.iH)(""),f=(0,o.iH)(!1),A=(0,l.Fl)((()=>h.value.length>=3)),Z=(0,l.Fl)({get:()=>U.getKeyAccountsTable,set:e=>{U.setKeyAccountsTable(e)}});function k(){_.value=!1}function W(){const e=new p.Z;e.createAccount({username:h.value,password:b.value}).then((()=>{(0,g.LX)(w("accountsCreateUserDialog.createdSuccessfully")),Z.value++,k()})).catch((e=>{(0,g.s9)(e.response.data,w("accountsCreateUserDialog.errorCreatingAccount"))}))}return(0,l.YP)((()=>t.showCreateUserDialog),(e=>{_.value=e})),(0,l.YP)(_,(e=>{a("update:showCreateUserDialog",e)})),(e,a)=>{const t=(0,l.up)("q-btn"),o=(0,l.up)("q-card-section"),p=(0,l.up)("q-card-actions"),g=(0,l.up)("q-card"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(w,{modelValue:_.value,"onUpdate:modelValue":a[7]||(a[7]=e=>_.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{style:{width:"700px","max-width":"80vw"},class:"dialog-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",D,[(0,l._)("div",v,(0,s.zw)(e.$t("accountsCreateUserDialog.title")),1),(0,l.Wm)(t,{flat:"",round:"",dense:"",icon:"sym_s_close",onClick:a[0]||(a[0]=e=>k())})]),(0,l.Wm)(o,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(c.Z,{label:e.$t("accountsCreateUserDialog.username"),icon:"sym_s_person",value:h.value,"onUpdate:value":a[1]||(a[1]=e=>h.value=e),rules:[()=>""!==h.value||e.$t("accountsCreateUserDialog.usernameRequired"),()=>h.value.length>=3||e.$t("accountsCreateUserDialog.usernameMinLength")]},null,8,["label","value","rules"])])),_:1}),(0,l.Wm)(o,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.Z,{password:b.value,"onUpdate:password":a[2]||(a[2]=e=>b.value=e)},null,8,["password"]),(0,l.Wm)(r.Z,{password:b.value,"onUpdate:password":a[3]||(a[3]=e=>b.value=e),class:"float-right"},null,8,["password"])])),_:1}),(0,l.Wm)(o,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(d.Z,{password:b.value,"onUpdate:isValidPassword":a[4]||(a[4]=e=>f.value=e)},null,8,["password"]),[[n.F8,b.value.length>0]])])),_:1}),(0,l.Wm)(p,{align:"between",class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i.Z,{label:e.$t("accountsCreateUserDialog.cancelBtn"),class:"q-mr-sm q-px-xl",color:"grey-7",onClick:a[5]||(a[5]=e=>k())},null,8,["label"]),(0,l.Wm)(i.Z,{color:"primary",icon:"sym_s_person_add",label:e.$t("accountsCreateUserDialog.createBtn"),disable:!A.value||!f.value,onClick:a[6]||(a[6]=e=>W())},null,8,["label","disable"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});var _=t(32074),h=t(44458),b=t(68879),f=t(63190),A=t(11821),Z=t(69984),k=t.n(Z);const W=U,C=W;k()(U,"components",{QDialog:_.Z,QCard:h.Z,QBtn:b.Z,QCardSection:f.Z,QCardActions:A.Z});const K={class:"flex justify-end items-center"},q={class:"td-action-bg-15"},x={class:"td-action-bg-20"},S=(0,l.aZ)({__name:"AccountTableActions",props:{account:{}},setup(e){const a=e,t=m(),o=(0,l.Fl)({get:()=>t.getKeyUpdatePasswordDialog,set:e=>{t.setKeyUpdatePasswordDialog(e)}}),n=(0,l.Fl)({get:()=>t.getKeyUpdateApiKeyDialog,set:e=>{t.setKeyUpdateApiKeyDialog(e)}});function c(){o.value++,t.setAccountSelected(a.account),t.setShowUpdatePasswordDialog(!0)}function i(){t.setAccountSelected(a.account),t.setShowDeleteUserDialog(!0)}function u(){n.value++,t.setAccountSelected(a.account),t.setShowUpdateApiKeyDialog(!0)}return(e,a)=>{const t=(0,l.up)("q-tooltip"),o=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("div",q,[(0,l.Wm)(o,{flat:"",size:"md",icon:"sym_s_lock",onClick:a[0]||(a[0]=e=>c())},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{class:"bg-primary text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("accountsTableActions.editPasswordBtn")),1)])),_:1})])),_:1})]),(0,l._)("div",x,[(0,l.Wm)(o,{flat:"",size:"md",icon:"sym_s_key",onClick:a[1]||(a[1]=e=>u())},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{class:"bg-primary text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("accountsTableActions.editApiKeyBtn")),1)])),_:1})])),_:1})]),(0,l._)("div",null,[(0,l.Wm)(o,{color:"negative",icon:"sym_s_delete",size:"md",onClick:a[2]||(a[2]=e=>i())},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{class:"bg-negative text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("accountsTableActions.deleteBtn")),1)])),_:1})])),_:1})])])}}});var Q=t(46858);const P=S,T=P;k()(S,"components",{QBtn:b.Z,QTooltip:Q.Z});const $=(0,l._)("th",{class:"text-center"},"UserId / GroupId",-1),z={class:"text-center"},F={class:"row justify-center q-mt-md"},B=(0,l.aZ)({__name:"AccountsTable",props:{accountsList:{}},setup(e){const a=e,t=(0,o.iH)(!1),n=(0,o.iH)(0),c=(0,o.iH)(""),u=(0,o.iH)([{name:"username",label:"Username",align:"left",field:"username",classes:"td-main-table",headerClasses:"bg-primary text-white",sortable:!0}]),r=(0,o.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),d=(0,l.Fl)((()=>Math.ceil(a.accountsList.length/r.value.rowsPerPage)));function p(){n.value++,t.value=!0}return(e,a)=>{const o=(0,l.up)("q-icon"),g=(0,l.up)("q-input"),w=(0,l.up)("q-space"),m=(0,l.up)("q-th"),y=(0,l.up)("q-tr"),D=(0,l.up)("q-td"),v=(0,l.up)("q-table"),U=(0,l.up)("q-pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(),(0,l.j4)(C,{showCreateUserDialog:t.value,"onUpdate:showCreateUserDialog":a[0]||(a[0]=e=>t.value=e),key:n.value},null,8,["showCreateUserDialog"])),(0,l.Wm)(v,{rows:e.accountsList,columns:u.value,filter:c.value,pagination:r.value,"onUpdate:pagination":a[3]||(a[3]=e=>r.value=e),"no-data-label":e.$t("accountsTable.noDataLabel"),"row-key":"key",color:"primary",flat:"",bordered:"","hide-pagination":""},{top:(0,l.w5)((()=>[(0,l.Wm)(g,{borderless:"",debounce:"300",color:"primary",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),label:e.$t("accountsTable.searchInput")},{prepend:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"sym_s_search"})])),_:1},8,["modelValue","label"]),(0,l.Wm)(w),(0,l.Wm)(i.Z,{label:e.$t("accountsTable.createAccountBtn"),color:"primary",icon:"sym_s_person_add",onClick:a[2]||(a[2]=e=>p())},null,8,["label"])])),header:(0,l.w5)((e=>[(0,l.Wm)(y,{props:e},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(a=>((0,l.wg)(),(0,l.j4)(m,{key:a.name,props:e,style:{"font-weight":"bold","font-size":"14px"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(a.label),1)])),_:2},1032,["props"])))),128)),$,(0,l.Wm)(m)])),_:2},1032,["props"])])),body:(0,l.w5)((e=>[(0,l.Wm)(y,{props:e},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(a=>((0,l.wg)(),(0,l.j4)(D,{key:a.name,props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(a.value),1)])),_:2},1032,["props"])))),128)),(0,l._)("td",z,(0,s.zw)(e.row.id)+" / "+(0,s.zw)(e.row.groupId),1),(0,l.Wm)(D,{class:"text-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{account:e.row},null,8,["account"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination","no-data-label"]),(0,l._)("div",F,[(0,l.Wm)(U,{modelValue:r.value.page,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.page=e),color:"primary",max:d.value,size:"md"},null,8,["modelValue","max"])])],64)}}});var j=t(84277),V=t(13119),H=t(22857),L=t(90136),I=t(31233),Y=t(21682),X=t(67220),M=t(80996);const N=B,G=N;k()(B,"components",{QTable:j.Z,QInput:V.Z,QIcon:H.Z,QSpace:L.Z,QTr:I.Z,QTh:Y.Z,QTd:X.Z,QPagination:M.Z});var R=t(45273);const E={class:"flex justify-between items-center"},J={class:"title-dialog"},O=(0,l.aZ)({__name:"AccountsUpdatePasswordDialog",setup(e){const a=(0,y.QT)().t,t=m(),c=(0,l.Fl)({get:()=>t.getShowUpdatePasswordDialog,set:e=>{t.setShowUpdatePasswordDialog(e)}}),w=(0,l.Fl)((()=>t.getAccountSelected.id)),D=(0,l.Fl)((()=>t.getAccountSelected.username)),v=(0,o.iH)(""),U=(0,o.iH)(!1),_=(0,l.Fl)({get:()=>t.keyAccountsTable,set:e=>{t.keyAccountsTable=e}});function h(){c.value=!1}function b(){(0,R.Q)();const e=new p.Z;e.updateAccount({id:w.value,password:v.value}).then((()=>{(0,g.LX)(a("accountsUpdatePasswordDialog.updatedSuccessfully")),_.value++,h()})).catch((e=>{(0,g.s9)(e.response.data,a("accountsUpdatePasswordDialog.errorUpdatingAccount"))})).finally((()=>{(0,R.Z)()}))}return(e,a)=>{const t=(0,l.up)("q-btn"),o=(0,l.up)("q-card-section"),p=(0,l.up)("q-card-actions"),g=(0,l.up)("q-card"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(w,{modelValue:c.value,"onUpdate:modelValue":a[6]||(a[6]=e=>c.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{style:{width:"700px","max-width":"80vw"},class:"dialog-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",E,[(0,l._)("div",J,(0,s.zw)(e.$t("accountsUpdatePasswordDialog.title",{username:D.value})),1),(0,l.Wm)(t,{flat:"",round:"",dense:"",icon:"sym_s_close",onClick:a[0]||(a[0]=e=>h())})]),(0,l.Wm)(o,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.Z,{password:v.value,"onUpdate:password":a[1]||(a[1]=e=>v.value=e),minLength:6},null,8,["password"]),(0,l.Wm)(r.Z,{password:v.value,"onUpdate:password":a[2]||(a[2]=e=>v.value=e),class:"float-right"},null,8,["password"])])),_:1}),(0,l.Wm)(o,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(d.Z,{minPasswordLength:6,password:v.value,"onUpdate:isValidPassword":a[3]||(a[3]=e=>U.value=e)},null,8,["password"]),[[n.F8,v.value.length>0]])])),_:1}),(0,l.Wm)(p,{align:"between",class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i.Z,{label:e.$t("accountsUpdatePasswordDialog.cancelBtn"),color:"grey-7",onClick:a[4]||(a[4]=e=>h())},null,8,["label"]),(0,l.Wm)(i.Z,{color:"primary",icon:"sym_s_key",label:e.$t("accountsUpdatePasswordDialog.updateBtn"),disable:!1===U.value,onClick:a[5]||(a[5]=e=>b())},null,8,["label","disable"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ee=O,ae=ee;k()(O,"components",{QDialog:_.Z,QCard:h.Z,QBtn:b.Z,QCardSection:f.Z,QCardActions:A.Z});const te={class:"flex justify-between items-center"},le={class:"title-dialog"},se={class:"box-api-key q-mb-sm"},oe={class:"flex justify-between"},ne={key:0,class:"text-primary",style:{"font-size":"16px"}},ce={key:0,style:{"font-size":"14px"}},ie=(0,l.aZ)({__name:"AccountsUpdateApiKeyDialog",setup(e){const a=(0,y.QT)().t,t=m(),n=(0,o.iH)(""),c=(0,l.Fl)({get:()=>t.getShowUpdateApiKeyDialog,set:e=>{t.setShowUpdateApiKeyDialog(e)}}),u=(0,l.Fl)((()=>t.getAccountSelected.id)),r=(0,l.Fl)((()=>t.getAccountSelected.username));function d(e){navigator.clipboard.writeText(e),(0,g.c0)({msg:`${a("accountsUpdateApiKeyDialog.copiedToClipboard")}`,position:"bottom",type:"primary",html:!0})}function w(){c.value=!1}function D(){(0,R.Q)();const e=new p.Z;e.updateAccount({id:u.value,shouldUpdateApiKey:!0}).then((e=>{n.value=e.data.body,(0,g.LX)(a("accountsUpdateApiKeyDialog.updatedSuccessfullyWithApiKey"))})).catch((e=>{(0,g.s9)(e.response.data,a("accountsUpdateApiKeyDialog.errorUpdatingAccount"))})).finally((()=>{(0,R.Z)()}))}return(e,a)=>{const t=(0,l.up)("q-btn"),o=(0,l.up)("q-icon"),u=(0,l.up)("q-card-section"),p=(0,l.up)("q-card-actions"),g=(0,l.up)("q-card"),m=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(m,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{style:{width:"700px","max-width":"80vw"},class:"dialog-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",te,[(0,l._)("div",le,(0,s.zw)(e.$t("accountsUpdateApiKeyDialog.title",{username:r.value})),1),(0,l.Wm)(t,{flat:"",round:"",dense:"",icon:"sym_s_close",onClick:a[0]||(a[0]=e=>w())})]),(0,l.Wm)(u,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l._)("div",se,[(0,l._)("div",oe,[n.value?((0,l.wg)(),(0,l.iD)("p",ne,(0,s.zw)(e.$t("accountsUpdateApiKeyDialog.generatedApiKey")),1)):(0,l.kq)("",!0),n.value?((0,l.wg)(),(0,l.j4)(o,{key:1,name:"sym_s_content_copy",size:"20px",class:"cursor-pointer icon-copy-api-key",onClick:a[1]||(a[1]=e=>d(n.value))})):(0,l.kq)("",!0)]),(0,l.Uk)(" "+(0,s.zw)(n.value),1)]),n.value?((0,l.wg)(),(0,l.iD)("small",ce,[(0,l.Wm)(o,{color:"amber",size:"sm",name:"sym_s_warning"}),(0,l.Uk)(" "+(0,s.zw)(e.$t("accountsUpdateApiKeyDialog.saveNewApiKey")),1)])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(p,{align:"between",class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i.Z,{label:e.$t("accountsUpdateApiKeyDialog.closeDialogBtn"),color:"grey-7",onClick:a[2]||(a[2]=e=>w())},null,8,["label"]),(0,l.Wm)(i.Z,{icon:"sym_s_key",label:e.$t("accountsUpdateApiKeyDialog.generateNewApiKeyBtn"),color:"primary",onClick:a[3]||(a[3]=e=>D())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ue=ie,re=ue;k()(ie,"components",{QDialog:_.Z,QCard:h.Z,QBtn:b.Z,QCardSection:f.Z,QIcon:H.Z,QCardActions:A.Z});var de=t(89906);const pe=(0,l.aZ)({__name:"AccountsDeleteUserDialog",setup(e){const a=(0,y.QT)().t,t=m(),s=(0,l.Fl)({get:()=>t.getShowDeleteUserDialog,set:e=>{t.setShowDeleteUserDialog(e)}}),o=(0,l.Fl)((()=>t.getAccountSelected.username)),n=(0,l.Fl)((()=>t.getAccountSelected.id)),c=(0,l.Fl)({get:()=>t.keyAccountsTable,set:e=>{t.keyAccountsTable=e}});function u(){s.value=!1}function r(){(0,R.Q)();const e=new p.Z;e.deleteAccount(n.value).then((()=>{(0,g.LX)(a("accountsDeleteUserDialog.deletedSuccessfully",{username:o.value})),c.value++,u()})).catch((e=>{(0,g.s9)(e.response.data,a("accountsDeleteUserDialog.errorDeletingAccount",{username:o.value}))})).finally((()=>{(0,R.Z)()}))}return(e,a)=>((0,l.wg)(),(0,l.j4)(de.Z,{showDeleteDialog:s.value,"onUpdate:showDeleteDialog":a[2]||(a[2]=e=>s.value=e),titleDialog:e.$t("accountsDeleteUserDialog.title",{username:o.value}),messageToDelete:e.$t("accountsDeleteUserDialog.messageDeleteAccount",{username:o.value}),warningToDelete:e.$t("accountsDeleteUserDialog.warningDeleteAccount")},{"card-actions":(0,l.w5)((()=>[(0,l.Wm)(i.Z,{label:e.$t("accountsDeleteUserDialog.cancelBtn"),color:"grey-7",onClick:a[0]||(a[0]=e=>u())},null,8,["label"]),(0,l.Wm)(i.Z,{color:"negative",label:e.$t("accountsDeleteUserDialog.deleteBtn"),onClick:a[1]||(a[1]=e=>r())},null,8,["label"])])),_:1},8,["showDeleteDialog","titleDialog","messageToDelete","warningToDelete"]))}}),ge=pe,we=ge,me=(0,l.aZ)({__name:"AccountsIndex",setup(e){const a=new p.Z,t=(0,o.iH)([]),s=m(),n=(0,l.Fl)((()=>s.getKeyAccountsTable)),c=(0,l.Fl)((()=>s.getKeyUpdatePasswordDialog)),i=(0,l.Fl)((()=>s.getKeyUpdateApiKeyDialog));function u(){a.getAccounts().then((e=>{t.value=e.data.body})).catch((e=>{console.error(e),(0,g.s9)(e.response.data,"accountsIndex.errorLoadingAccounts")}))}return(0,l.wF)((()=>{u()})),(0,l.YP)(n,(()=>{u()})),(e,a)=>{const s=(0,l.up)("q-card-section"),o=(0,l.up)("q-card"),n=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(n,{padding:""},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(ae,{key:c.value})),((0,l.wg)(),(0,l.j4)(re,{key:i.value})),(0,l.Wm)(we),(0,l.Wm)(o,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,{accountsList:t.value},null,8,["accountsList"])])),_:1})])),_:1})])),_:1})}}});var ye=t(69885);const De=me,ve=De;k()(me,"components",{QPage:ye.Z,QCard:h.Z,QCardSection:f.Z})}}]);