"use strict";(self["webpackChunkos_dash"]=self["webpackChunkos_dash"]||[]).push([[755],{85090:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ct});var l=a(59835),s=a(60499),n=a(62120),i=a(60016),o=a(86970),u=a(99573),r=a(3746);const p=(0,r.Q_)("virtualHost",{state:()=>({showCreateVirtualHostDialog:!1,showDeleteVirtualHostDialog:!1,selectedVirtualHost:{},virtualHostsList:[]}),getters:{getShowCreateVirtualHostDialog(e){return e.showCreateVirtualHostDialog},getShowDeleteVirtualHostDialog(e){return e.showDeleteVirtualHostDialog},getSelectedVirtualHost(e){return e.selectedVirtualHost},getVirtualHostsList(e){return e.virtualHostsList}},actions:{setShowCreateVirtualHostDialog(e){this.showCreateVirtualHostDialog=e},setShowDeleteVirtualHostDialog(e){this.showDeleteVirtualHostDialog=e},setSelectedVirtualHost(e){this.selectedVirtualHost=e},setVirtualHostsList(e){this.virtualHostsList=e}}}),d={class:"flex justify-center items-center"},m=(0,l.aZ)({__name:"VirtualHostsTableActions",props:{virtualHost:{}},setup(e){const t=e,a=p();function s(){a.setSelectedVirtualHost(t.virtualHost),a.setShowDeleteVirtualHostDialog(!0)}return(e,t)=>{const a=(0,l.up)("q-tooltip"),n=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",d,["primary"!==e.virtualHost.type?((0,l.wg)(),(0,l.j4)(n,{key:0,color:"negative",icon:"sym_s_delete",size:"md",dense:"",outline:"",class:"q-mx-xs",onClick:t[0]||(t[0]=e=>s())},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"bg-negative text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("virtualHostsTableActions.deleteBtn")),1)])),_:1})])),_:1})):(0,l.kq)("",!0)])}}});var c=a(68879),g=a(46858),v=a(69984),b=a.n(v);const f=m,h=f;b()(m,"components",{QBtn:c.Z,QTooltip:g.Z});const w={class:"flex justify-between q-mx-xs"},H={class:"text-h6 vhost-card-title"},D={class:"flex justify-start items-center"},y=(0,l.aZ)({__name:"VirtualHostsTableMainTd",props:{mapping:{}},setup(e){return(e,t)=>{const a=(0,l.up)("q-card-section"),s=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(s,{flat:"",class:"q-pa-sm vhost-card"},{default:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l._)("div",H,(0,o.zw)(e.mapping.hostname),1),(0,l.Wm)(h,{virtualHost:e.mapping,class:"absolute-top-right q-ma-sm"},null,8,["virtualHost"])]),(0,l.Wm)(a,{class:"card-section-vhost"},{default:(0,l.w5)((()=>[(0,l._)("div",D,[e.mapping.parentHostname?((0,l.wg)(),(0,l.j4)(u.Z,{key:0,icon:"sym_s_home",label:e.mapping.parentHostname,class:"q-mr-md"},null,8,["label"])):(0,l.kq)("",!0),(0,l.Wm)(u.Z,{icon:"sym_s_folder_open",label:e.mapping.rootDirectory,class:"q-mr-md"},null,8,["label"]),(0,l.Wm)(u.Z,{icon:"sym_s_description",label:e.mapping.type},null,8,["label"])])])),_:1})])),_:1})}}});var _=a(44458),q=a(63190);const x=y,V=x;b()(y,"components",{QCard:_.Z,QCardSection:q.Z});var Z=a(67377),C=a(39697);const k={key:0},W={key:1},T={class:"flex justify-between items-center"},S={class:"row justify-start items-center"},$={class:"q-mr-lg",style:{"font-size":"0.9708rem"}},M={class:"flex justify-end q-px-sm q-py-sm"},L=(0,l.aZ)({__name:"VirtualHostsTableMappingsTd",props:{mapping:{}},setup(e){const t=e,a=(0,C.i)(),s=p(),n=(0,l.Fl)({get:()=>a.getShowDeleteMappingDialog,set:e=>{a.setShowDeleteMappingDialog(e)}}),i=(0,l.Fl)({get:()=>a.getSelectedDeleteMapping,set:e=>{a.setSelectedDeleteMapping(e)}});function u(e,a){i.value={mappingId:e,hostname:t.mapping.hostname,path:a},n.value=!0}function r(){s.setSelectedVirtualHost(t.mapping),a.setShowCreateMappingDialog(!0)}function d(e,t){let a=e.substring(0,50),l=a;return e.length>50&&(l+="..."),t&&(l+=` (${t.toString()})`),l}return(e,t)=>{const a=(0,l.up)("q-tooltip"),s=(0,l.up)("q-btn"),n=(0,l.up)("q-card");return"alias"===e.mapping.type?((0,l.wg)(),(0,l.iD)("div",k,(0,o.zw)(e.$t("virtualHostsTableMappingsTd.aliasWarning")),1)):((0,l.wg)(),(0,l.iD)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mapping.mappings,((t,i)=>((0,l.wg)(),(0,l.iD)("div",{key:i},[(0,l.Wm)(n,{flat:"",class:"q-ma-sm q-py-sm q-px-sm mappings-td-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l._)("div",S,[(0,l._)("div",$,(0,o.zw)(t.path),1),"service"===t.targetType?((0,l.wg)(),(0,l.j4)(Z.Z,{key:0,labelLeft:t.targetType,labelRight:t.targetValue,class:"q-mr-md",color:"#39594E",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])):(0,l.kq)("",!0),"url"===t.targetType?((0,l.wg)(),(0,l.j4)(Z.Z,{key:1,labelLeft:t.targetType,labelRight:`${t.targetValue} (${t.targetHttpResponseCode.toString()})`,class:"q-mr-md",color:"#4E3473",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])):(0,l.kq)("",!0),"response-code"===t.targetType?((0,l.wg)(),(0,l.j4)(Z.Z,{key:2,labelLeft:t.targetType,labelRight:t.targetHttpResponseCode.toString(),class:"q-mr-md",color:"#5C5C3A",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])):(0,l.kq)("",!0),"inline-html"===t.targetType?((0,l.wg)(),(0,l.j4)(Z.Z,{key:3,labelLeft:t.targetType,labelRight:d(t.targetValue,t.targetHttpResponseCode),class:"q-mr-md",color:"#2A4D8F",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])):(0,l.kq)("",!0),"static-files"===t.targetType?((0,l.wg)(),(0,l.j4)(Z.Z,{key:4,labelLeft:t.targetType,labelRight:e.mapping.rootDirectory.toString(),class:"q-mr-md",color:"#D9732A",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])):(0,l.kq)("",!0),(0,l.Wm)(Z.Z,{labelLeft:e.$t("virtualHostsTableMappingsTd.matchPattern"),labelRight:t.matchPattern,color:"#c97350",fontSize:"0.7281rem"},null,8,["labelLeft","labelRight"])]),(0,l.Wm)(s,{color:"negative",icon:"sym_s_delete",size:"md",dense:"",onClick:e=>u(t.id,t.path)},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"bg-negative text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("virtualHostsTableMappingsTd.deleteBtn")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])))),128)),(0,l._)("div",M,[(0,l.Wm)(s,{color:"primary",icon:"sym_s_add",class:"full-width",outline:"",dense:"",onClick:t[0]||(t[0]=e=>r())},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"bg-primary text-white",style:{"font-size":"14px"},offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("virtualHostsTableMappingsTd.createMappingBtn")),1)])),_:1})])),_:1})])]))}}}),U=L,F=U;b()(L,"components",{QCard:_.Z,QBtn:c.Z,QTooltip:g.Z});var Q=a(84278);const R={class:"flex justify-between itens-center full-width q-mb-sm"},P={class:"row justify-center q-mt-md"},j=(0,l.aZ)({__name:"VirtualHostsTable",props:{mappingsList:{}},setup(e){const t=e,a=(0,C.i)(),n=p(),i=(0,s.iH)(""),o=(0,s.iH)([{name:"hostname",align:"left",field:"hostname",sortable:!0},{name:"parentHostname",align:"left",field:"parentHostname",sortable:!0},{name:"rootDirectory",align:"left",field:"rootDirectory",sortable:!0},{name:"type",align:"left",field:"type",sortable:!0}]),u=(0,s.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),r=(0,l.Fl)({get:()=>a.getShowCreateMappingDialog,set:e=>{a.showCreateMappingDialog=e}}),d=(0,l.Fl)({get:()=>n.getShowCreateVirtualHostDialog,set:e=>{n.setShowCreateVirtualHostDialog(e)}}),m=(0,l.Fl)((()=>Math.ceil(t.mappingsList.length/u.value.rowsPerPage)));function c(){r.value=!0}function g(){d.value=!0}return(e,t)=>{const a=(0,l.up)("q-icon"),s=(0,l.up)("q-input"),n=(0,l.up)("q-td"),r=(0,l.up)("q-tr"),p=(0,l.up)("q-table"),d=(0,l.up)("q-pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",R,[(0,l.Wm)(s,{filled:"",debounce:"300",color:"primary",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),label:e.$t("virtualHostsTable.searchInput"),style:{width:"300px"}},{prepend:(0,l.w5)((()=>[(0,l.Wm)(a,{name:"sym_s_search"})])),_:1},8,["modelValue","label"]),(0,l._)("div",null,[(0,l.Wm)(Q.Z,{label:e.$t("virtualHostsTable.createVirtualHostsBtn"),color:"primary",icon:"sym_s_add",class:"q-mr-md",onClick:t[1]||(t[1]=e=>g())},null,8,["label"]),(0,l.Wm)(Q.Z,{label:e.$t("virtualHostsTable.createMappingsBtn"),color:"primary",icon:"sym_s_add",onClick:t[2]||(t[2]=e=>c())},null,8,["label"])])]),(0,l.Wm)(p,{rows:e.mappingsList,columns:o.value,filter:i.value,pagination:u.value,"onUpdate:pagination":t[3]||(t[3]=e=>u.value=e),"no-data-label":e.$t("virtualHostsTable.noDataLabel"),"row-key":"hostname",color:"primary",flat:"",bordered:"","hide-header":"","hide-pagination":""},{body:(0,l.w5)((e=>[(0,l.Wm)(r,{props:e,"no-hover":""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"virtual-hosts-td-main"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{mapping:e.row},null,8,["mapping"])])),_:2},1024),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{mapping:e.row},null,8,["mapping"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination","no-data-label"]),(0,l._)("div",P,[(0,l.Wm)(d,{modelValue:u.value.page,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value.page=e),color:"primary",max:m.value,size:"md"},null,8,["modelValue","max"])])],64)}}});var I=a(13119),z=a(22857),Y=a(84277),B=a(31233),A=a(67220),K=a(80996);const O=j,E=O;b()(j,"components",{QInput:I.Z,QIcon:z.Z,QTable:Y.Z,QTr:B.Z,QTd:A.Z,QPagination:K.Z});var N=a(94629);const X=(0,l.aZ)({__name:"MappingsResponseCodeSelect",props:{disable:{type:Boolean},responsesTypes:{},defaultValue:{default:200}},emits:["update:responseCode"],setup(e,{emit:t}){const a=e,n={"2xx":[{label:"200 - OK",value:200},{label:"201 - Created",value:201},{label:"204 - No Content",value:204}],"3xx":[{label:"301 - Moved Permanently",value:301},{label:"302 - Found",value:302},{label:"304 - Not Modified",value:304},{label:"307 - Temporary Redirect",value:307},{label:"308 - Permanent Redirect",value:308}],"4xx":[{label:"400 - Bad Request",value:400},{label:"401 - Unauthorized",value:401},{label:"403 - Forbidden",value:403},{label:"404 - Not Found",value:404}],"5xx":[{label:"501 - Not Implemented",value:501},{label:"503 - Service Unavailable",value:503}]};function i(){let e=a.responsesTypes;e||(e=["2xx","3xx","4xx","5xx"]);const t=[];for(const a of e)t.push(...n[a]);return t}const o=(0,s.iH)(a.defaultValue);return(0,l.YP)((()=>a.defaultValue),(e=>{o.value=e}),{immediate:!0}),(0,l.YP)(o,(e=>{t("update:responseCode",e)})),(e,t)=>((0,l.wg)(),(0,l.j4)(N.Z,{selected:o.value,"onUpdate:selected":[t[0]||(t[0]=e=>o.value=e),t[1]||(t[1]=e=>o.value=e)],label:e.$t("mappingsResponseCodeInput.responseCodeLabel"),isDisable:e.disable,options:i()},null,8,["selected","label","isDisable","options"]))}}),G=X,J=G;var ee=a(25121),te=a(15521);const ae=(0,l.aZ)({__name:"MappingsUrlInput",props:{label:{default:""},prefix:{default:""},domain:{default:""},disable:{type:Boolean},isRequired:{type:Boolean,default:!1}},emits:["update:url","update:isValidUrl"],setup(e,{emit:t}){const a=e,n=(0,ee.QT)().t,i=()=>p.value||n("mappingsUrlInput.targetUrlIsInvalid"),o=()=>""!==r.value||n("mappingsUrlInput.targetUrlIsRequired"),u=(0,l.Fl)((()=>a.isRequired?[i,o]:[i])),r=(0,s.iH)(""),p=(0,l.Fl)((()=>{if(0==r.value.length)return!0;const e=/^[^\n]{3,1000}$/u;return e.test(a.prefix+r.value)})),d=(0,l.Fl)((()=>{const e=/((\*\.)?([a-zA-Z0-9_]+[\w-]*\.)*)?([a-zA-Z0-9_][\w-]*[a-zA-Z0-9])\.([a-zA-Z]{2,})/;return e.test(r.value)}));return(0,l.YP)(r,(e=>{a.domain&&!d.value&&(e.startsWith("/")||(e="/"+e),e=a.domain+e),t("update:url",e)}),{immediate:!0}),(0,l.YP)(p,(e=>{t("update:isValidUrl",e)}),{immediate:!0}),(e,t)=>((0,l.wg)(),(0,l.j4)(te.Z,{value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e),label:e.label,prefix:e.prefix,disable:e.disable,"max-length":"1000",rules:u.value},null,8,["value","label","prefix","disable","rules"]))}}),le=ae,se=le,ne=(0,l.aZ)({__name:"MappingsInlineHtmlInput",emits:["update:inlineHtml","update:httpResponseCode","update:isValidResponseCode"],setup(e,{emit:t}){const a=(0,s.iH)(""),n=(0,s.iH)(""),i=(0,s.iH)(!0);return(0,l.YP)(a,(e=>{t("update:inlineHtml",e)}),{immediate:!0}),(0,l.YP)(n,(e=>{t("update:httpResponseCode",e)}),{immediate:!0}),(0,l.YP)(i,(e=>{t("update:isValidResponseCode",e)}),{immediate:!0}),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(te.Z,{value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),label:e.$t("mappingsInlineHtmlInput.targetInlineHtmlLabel"),type:"textarea","max-length":"3500",rules:[()=>""!==a.value||e.$t("mappingsInlineHtmlInput.targetInlineHtmlIsRequired")]},null,8,["value","label","rules"]),(0,l.Wm)(J,{defaultValue:200,responsesTypes:["2xx","4xx","5xx"],"onUpdate:responseCode":t[1]||(t[1]=e=>n.value=e)})],64))}}),ie=ne,oe=ie,ue=(0,l.aZ)({__name:"MappingsAdvancedOptions",emits:["update:selectedMatchPattern"],setup(e,{emit:t}){const a=(0,ee.QT)().t,n=(0,s.iH)("begins-with"),i=(0,s.iH)([{label:a("mappingsAdvancedOptions.matchPatternOptions.beginWith"),value:"begins-with"},{label:a("mappingsAdvancedOptions.matchPatternOptions.contains"),value:"contains"},{label:a("mappingsAdvancedOptions.matchPatternOptions.equals"),value:"equals"},{label:a("mappingsAdvancedOptions.matchPatternOptions.endsWith"),value:"ends-with"}]);return(0,l.YP)(n,(e=>{t("update:selectedMatchPattern",e)}),{immediate:!0}),(e,t)=>{const a=(0,l.up)("q-card-section"),s=(0,l.up)("q-card"),o=(0,l.up)("q-expansion-item"),u=(0,l.up)("q-list");return(0,l.wg)(),(0,l.j4)(u,{bordered:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{"expand-separator":"",icon:"sym_s_settings",label:e.$t("mappingsAdvancedOptions.advancedOptionsLabel")},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N.Z,{selected:n.value,"onUpdate:selected":t[0]||(t[0]=e=>n.value=e),label:e.$t("mappingsAdvancedOptions.matchPatternLabel"),options:i.value},null,8,["selected","label","options"])])),_:1})])),_:1})])),_:1},8,["label"])])),_:1})}}});var re=a(13246),pe=a(50651);const de=ue,me=de;b()(ue,"components",{QList:re.Z,QExpansionItem:pe.Z,QCard:_.Z,QCardSection:q.Z});var ce=a(9281),ge=a(88900),ve=a(45273),be=a(73451);const fe={class:"flex justify-between items-center"},he={class:"title-dialog"},we={key:1},He={class:"q-gutter-sm"},De=(0,l.aZ)({__name:"MappingsCreateDialog",setup(e){const t=(0,ee.QT)().t,a=(0,C.i)(),u=p(),r=(0,s.iH)(!1),d=(0,s.iH)(!1),m=(0,l.Fl)((()=>r.value||d.value)),c=(0,s.iH)([]),g=(0,s.iH)(""),v=(0,s.iH)(""),b=(0,s.iH)("begins-with"),f=(0,s.iH)([]),h=(0,s.iH)("/"),w=(0,s.iH)("service"),H=(0,s.iH)(""),D=(0,s.iH)(""),y=(0,s.iH)(100),_=(0,s.iH)(""),q=(0,s.iH)(!1),x=(0,s.iH)(!1),V=(0,l.Fl)((()=>{switch(w.value){case"url":return""!==g.value&&""!==b.value&&q.value&&x.value;case"service":return""!==g.value&&""!==b.value&&""!==H.value&&q.value;case"response-code":return""!==g.value&&""!==b.value&&q.value;case"inline-html":return""!==g.value&&""!==b.value&&""!==_.value;case"static-files":return""!==g.value&&""!==b.value}return!1})),Z=(0,l.Fl)({get:()=>a.getShowCreateMappingDialog,set:e=>a.setShowCreateMappingDialog(e)}),k=(0,l.Fl)({get:()=>a.getKeyMappingsTable,set:e=>a.setKeyMappingsTable(e)});function W(){r.value=!0;const e=new i.Z;e.getVirtualHosts().then((e=>{const t=e.data.body;if(0===t.length)return;const a=t.filter((e=>"alias"!==e.type));c.value=a.map((e=>e.hostname)),0!==c.value.length&&(g.value=a[0].hostname,u.getSelectedVirtualHost&&(g.value=u.getSelectedVirtualHost.hostname))})).catch((e=>{console.error(e)})).finally((()=>{r.value=!1}))}function T(){d.value=!0;const e=new ce.Z;e.getServicesStatus().then((e=>{if(f.value=[],0===e.data.body.length)return;const t=e.data.body.installedServices;f.value=t.filter((e=>e.portBindings.length>0)).map((e=>({label:(0,be.R)(e.name),value:e.name})))})).catch((e=>{console.error(e)})).finally((()=>{d.value=!1}))}function S(){u.setSelectedVirtualHost({}),Z.value=!1}function $(){(0,ve.Q)();const e=new n.Z;let a={hostname:g.value,matchPattern:b.value,path:h.value,targetType:w.value};switch(w.value){case"url":a.targetValue=D.value;break;case"service":a.targetValue=H.value;break;case"response-code":a.targetHttpResponseCode=y.value;break;case"inline-html":a.targetValue=_.value,y.value&&(a.targetHttpResponseCode=y.value)}e.createMappings(a).then((()=>{(0,ge.LX)(t("mappingsCreateDialog.createMappingSuccessfully")),k.value++,S()})).catch((e=>{console.error(e),(0,ge.s9)(e.response.data,t("mappingsCreateDialog.createMappingError"))})).finally((()=>{(0,ve.Z)()}))}return(0,l.bv)((()=>{W(),T()})),(0,l.YP)(g,(e=>{if(e&&e.length>0){const t=u.getVirtualHostsList.find((t=>t.hostname==e));v.value=t.rootDirectory}})),(e,t)=>{const a=(0,l.up)("q-btn"),s=(0,l.up)("q-skeleton"),n=(0,l.up)("q-card-section"),i=(0,l.up)("q-radio"),u=(0,l.up)("q-card-actions"),r=(0,l.up)("q-card"),p=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(p,{modelValue:Z.value,"onUpdate:modelValue":t[18]||(t[18]=e=>Z.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{width:"700px","max-width":"80vw"},class:"dialog-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",fe,[(0,l._)("div",he,(0,o.zw)(e.$t("mappingsCreateDialog.title")),1),(0,l.Wm)(a,{flat:"",round:"",dense:"",icon:"sym_s_close",onClick:t[0]||(t[0]=e=>S())})]),!0===m.value?((0,l.wg)(),(0,l.j4)(n,{key:0,class:"q-px-none"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(6,(e=>(0,l.Wm)(s,{key:e,class:"q-my-lg",height:"60px",width:"100%"}))),64))])),_:1})):((0,l.wg)(),(0,l.iD)("div",we,[(0,l.Wm)(n,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l._)("div",He,[(0,l.Wm)(i,{modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e),val:"service",label:e.$t("mappingsCreateDialog.targetType.service")},null,8,["modelValue","label"]),(0,l.Wm)(i,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),val:"url",label:e.$t("mappingsCreateDialog.targetType.url")},null,8,["modelValue","label"]),(0,l.Wm)(i,{modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value=e),val:"response-code",label:e.$t("mappingsCreateDialog.targetType.responseCode")},null,8,["modelValue","label"]),(0,l.Wm)(i,{modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value=e),val:"inline-html",label:e.$t("mappingsCreateDialog.targetType.inlineHtml")},null,8,["modelValue","label"]),(0,l.Wm)(i,{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=e=>w.value=e),val:"static-files",label:e.$t("mappingsCreateDialog.targetType.staticFiles")},null,8,["modelValue","label"])])])),_:1}),(0,l.Wm)(n,{class:"q-pa-none q-pb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(N.Z,{selected:g.value,"onUpdate:selected":t[6]||(t[6]=e=>g.value=e),label:e.$t("mappingsCreateDialog.hostnameLabel"),options:c.value},null,8,["selected","label","options"])])),_:1}),(0,l.Wm)(n,{class:"q-pa-none q-pb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{label:e.$t("mappingsCreateDialog.pathLabel"),prefix:g.value+"/",disable:!g.value,isRequired:!1,"onUpdate:url":t[7]||(t[7]=e=>h.value=e),"onUpdate:isValidUrl":t[8]||(t[8]=e=>q.value=e)},null,8,["label","prefix","disable"])])),_:1}),(0,l.Wm)(n,{class:"q-pa-none"},{default:(0,l.w5)((()=>["service"===w.value?((0,l.wg)(),(0,l.j4)(N.Z,{key:0,selected:H.value,"onUpdate:selected":t[9]||(t[9]=e=>H.value=e),label:e.$t("mappingsCreateDialog.servicesNameLabel"),options:f.value},null,8,["selected","label","options"])):(0,l.kq)("",!0),"url"===w.value?((0,l.wg)(),(0,l.j4)(se,{key:1,label:e.$t("mappingsCreateDialog.targetUrlLabel"),domain:g.value,isRequired:!0,"onUpdate:url":t[10]||(t[10]=e=>D.value=e),"onUpdate:isValidUrl":t[11]||(t[11]=e=>x.value=e)},null,8,["label","domain"])):(0,l.kq)("",!0),"response-code"===w.value?((0,l.wg)(),(0,l.j4)(J,{key:2,defaultValue:200,"onUpdate:responseCode":t[12]||(t[12]=e=>y.value=e)})):(0,l.kq)("",!0),"inline-html"===w.value?((0,l.wg)(),(0,l.j4)(oe,{key:3,"onUpdate:inlineHtml":t[13]||(t[13]=e=>_.value=e),"onUpdate:httpResponseCode":t[14]||(t[14]=e=>y.value=e)})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(n,{class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(me,{"onUpdate:selectedMatchPattern":t[15]||(t[15]=e=>b.value=e)})])),_:1}),(0,l.Wm)(u,{align:"between",class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q.Z,{label:e.$t("mappingsCreateDialog.cancelBtn"),class:"q-mr-sm q-px-xl",color:"grey-8",onClick:t[16]||(t[16]=e=>S())},null,8,["label"]),(0,l.Wm)(Q.Z,{disable:!1===V.value,color:"primary",icon:"sym_s_add",label:e.$t("mappingsCreateDialog.createBtn"),onClick:t[17]||(t[17]=e=>$())},null,8,["disable","label"])])),_:1})]))])),_:1})])),_:1},8,["modelValue"])}}});var ye=a(32074),_e=a(57133),qe=a(11480),xe=a(11821);const Ve=De,Ze=Ve;b()(De,"components",{QDialog:ye.Z,QCard:_.Z,QBtn:c.Z,QCardSection:q.Z,QSkeleton:_e.ZP,QRadio:qe.Z,QCardActions:xe.Z});var Ce=a(89906),ke=a(19302);const We=(0,l.aZ)({__name:"MappingsDeleteDialog",setup(e){const t=(0,ee.QT)().t,a=(0,C.i)(),s=(0,l.Fl)({get:()=>a.getShowDeleteMappingDialog,set:e=>{a.setShowDeleteMappingDialog(e)}}),i=(0,l.Fl)({get:()=>a.getKeyMappingsTable,set:e=>{a.setKeyMappingsTable(e)}}),o=(0,l.Fl)((()=>a.getSelectedDeleteMapping)),u=(0,l.Fl)((()=>{const e=(0,ke.Z)();return e.dark.isActive?"/icons/bomb_dark.svg":"/icons/bomb_light.svg"}));function r(){s.value=!1}function p(){const e=new n.Z;(0,ve.Q)(),e.deleteMappings(o.value).then((()=>{i.value++,(0,ge.LX)(`${t("mappingsDeleteDialog.deleteMappingSuccess")}`),o.value.hostname="",o.value.mappingId=0,o.value.path="",setTimeout((()=>{r()}),100)})).catch((e=>{console.error(e),(0,ge.s9)(e.response.data,`${t("mappingsDeleteDialog.deleteMappingError")}`)})).finally((()=>{(0,ve.Z)()}))}return(e,t)=>((0,l.wg)(),(0,l.j4)(Ce.Z,{showDeleteDialog:s.value,"onUpdate:showDeleteDialog":t[2]||(t[2]=e=>s.value=e),titleDialog:e.$t("mappingsDeleteDialog.title"),imagePath:u.value,messageToDelete:e.$t("mappingsDeleteDialog.confirmRemoveMapping",{path:o.value.path}),warningToDelete:e.$t("mappingsDeleteDialog.warningRemoveMapping")},{"card-actions":(0,l.w5)((()=>[(0,l.Wm)(Q.Z,{label:e.$t("mappingsDeleteDialog.cancelBtn"),color:"grey-8",onClick:t[0]||(t[0]=e=>r())},null,8,["label"]),(0,l.Wm)(Q.Z,{icon:"sym_s_delete",label:e.$t("mappingsDeleteDialog.deleteBtn"),color:"negative",onClick:t[1]||(t[1]=e=>p())},null,8,["label"])])),_:1},8,["showDeleteDialog","titleDialog","imagePath","messageToDelete","warningToDelete"]))}}),Te=We,Se=Te,$e=(0,l.aZ)({__name:"FqdnInput",props:{fqdn:{},label:{default:"FQDN"}},emits:["update:fqdn","update:isValidFqdn"],setup(e,{emit:t}){const a=e,n=/^[\p{L}\d\/=[\]().?]{3,1000}$/u,i=(0,s.iH)(a.fqdn);return(0,l.YP)(i,(e=>{const a=e.length>3&&e.length<=1e3&&n.test(e);t("update:fqdn",e),t("update:isValidFqdn",a)})),(0,l.YP)((()=>a.fqdn),(e=>{i.value=e}),{immediate:!0}),(e,t)=>((0,l.wg)(),(0,l.j4)(te.Z,{value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e),maxLength:"1000",label:e.label,rules:[()=>!!i.value||e.$t("form.fqdnInput.fqdnRequired",{label:e.label}),()=>i.value.length<=1e3||e.$t("form.fqdnInput.fqdnMaxLengthError",{label:e.label}),()=>n.test(i.value)||e.$t("form.fqdnInput.fqdnRegexError",{label:e.label})],class:"q-mb-sm"},null,8,["value","label","rules"]))}}),Me=$e,Le=Me,Ue={class:"q-mt-sm"},Fe=(0,l.aZ)({__name:"VirtualHostsSubdomainForm",emits:["update:hostname","update:isValidFqdn"],setup(e,{emit:t}){const a=p(),n=(0,s.iH)(0),i=(0,s.iH)(""),o=(0,s.iH)(""),u=(0,s.iH)(!1),r=(0,l.Fl)((()=>`${i.value}.${o.value}`)),d=(0,l.Fl)((()=>m.value.filter((e=>"top-level"===e.type||"primary"===e.type)).map((e=>e.hostname)))),m=(0,l.Fl)((()=>a.getVirtualHostsList));return(0,l.bv)((()=>{o.value=d.value[0]})),(0,l.YP)(r,(e=>{n.value++,t("update:hostname",e)})),(0,l.YP)(u,(e=>{t("update:isValidFqdn",e)})),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l.Wm)(N.Z,{label:e.$t("virtualHostsSubdomainForm.topLevelLabel"),selected:o.value,"onUpdate:selected":t[0]||(t[0]=e=>o.value=e),options:d.value},null,8,["label","selected","options"])]),(0,l._)("div",Ue,[(0,l.Wm)(te.Z,{suffix:`.${o.value}`,value:i.value,"onUpdate:value":t[1]||(t[1]=e=>i.value=e),label:e.$t("virtualHostsSubdomainForm.hostnameLabel"),maxLength:"1000",rules:[()=>!!r.value||e.$t("form.fqdnInput.fqdnRequired"),()=>r.value.length<=255||e.$t("form.fqdnInput.fqdnMaxLengthError"),()=>/^[\p{L}\d\/=[\]().?]{3,1000}$/u.test(r.value)||e.$t("form.fqdnInput.fqdnRegexError")]},null,8,["suffix","value","label","rules"])]),((0,l.wg)(),(0,l.j4)(Le,{label:e.$t("virtualHostsSubdomainForm.hostnameLabel"),fqdn:r.value,"onUpdate:fqdn":t[2]||(t[2]=e=>r.value=e),"onUpdate:isValidFqdn":t[3]||(t[3]=e=>u.value=e),key:n.value,class:"hidden"},null,8,["label","fqdn"]))],64))}}),Qe=Fe,Re=Qe,Pe={class:"flex justify-between items-center q-pb-md"},je={class:"title-dialog"},Ie={key:1},ze=(0,l.aZ)({__name:"VirtualHostsCreateDialog",setup(e){const t=(0,ee.QT)().t,a=p(),n=(0,C.i)(),u=(0,s.iH)(""),r=(0,s.iH)(""),d=(0,s.iH)("subdomain"),m=(0,s.iH)(!1),c=(0,l.Fl)((()=>m.value)),g=(0,l.Fl)((()=>a.getVirtualHostsList.filter((e=>"alias"!==e.type)))),v=(0,l.Fl)((()=>g.value.map((e=>({label:e.hostname,value:e.hostname}))))),b=(0,s.iH)([{label:t("virtualHostsCreateDialog.optionTopLevel"),value:"top-level"},{label:t("virtualHostsCreateDialog.optionSubdomain"),value:"subdomain"},{label:t("virtualHostsCreateDialog.optionAlias"),value:"alias"}]),f=(0,l.Fl)({get:()=>a.getShowCreateVirtualHostDialog,set:e=>{a.setShowCreateVirtualHostDialog(e)}}),h=(0,l.Fl)({get:()=>n.getKeyMappingsTable,set:e=>{n.setKeyMappingsTable(e)}});function w(){const e=new i.Z;(0,ve.Q)();const l={hostname:u.value};"alias"===d.value&&(l.type=d.value,l.parentHostname=r.value),e.createVirtualHost(l).then((()=>{h.value++,a.setShowCreateVirtualHostDialog(!1),(0,ge.LX)(t("virtualHostsCreateDialog.createVirtualHostSuccess"))})).catch((e=>{console.error(e),(0,ge.s9)(e.response.data,t("virtualHostsCreateDialog.createVirtualHostError"))})).finally((()=>{(0,ve.Z)()}))}return(0,l.YP)(d,((e,t)=>{"subdomain"===t&&(u.value="")})),(e,t)=>{const a=(0,l.up)("q-btn"),s=(0,l.up)("q-card-section"),n=(0,l.up)("q-card-actions"),i=(0,l.up)("q-card"),p=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(p,{modelValue:f.value,"onUpdate:modelValue":t[9]||(t[9]=e=>f.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",style:{width:"700px","max-width":"80vw"},class:"dialog-card-bg"},{default:(0,l.w5)((()=>[(0,l._)("div",Pe,[(0,l._)("div",je,(0,o.zw)(e.$t("virtualHostsCreateDialog.title")),1),(0,l.Wm)(a,{icon:"sym_s_close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=e=>f.value=!1)})]),(0,l.Wm)(s,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(N.Z,{label:e.$t("virtualHostsCreateDialog.typeLabel"),selected:d.value,"onUpdate:selected":t[1]||(t[1]=e=>d.value=e),options:b.value},null,8,["label","selected","options"])])),_:1}),"subdomain"===d.value?((0,l.wg)(),(0,l.j4)(s,{key:0,class:"q-pa-none q-pt-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(Re,{"onUpdate:hostname":t[2]||(t[2]=e=>u.value=e),"onUpdate:isValidFqdn":t[3]||(t[3]=e=>m.value=e)})])),_:1})):((0,l.wg)(),(0,l.iD)("div",Ie,["alias"===d.value?((0,l.wg)(),(0,l.j4)(s,{key:0,class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(N.Z,{label:e.$t("virtualHostsCreateDialog.parentHostnameLabel"),selected:r.value,"onUpdate:selected":t[4]||(t[4]=e=>r.value=e),options:v.value},null,8,["label","selected","options"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(s,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Le,{label:e.$t("virtualHostsCreateDialog.hostnameLabel"),fqdn:u.value,"onUpdate:fqdn":t[5]||(t[5]=e=>u.value=e),"onUpdate:isValidFqdn":t[6]||(t[6]=e=>m.value=e)},null,8,["label","fqdn"])])),_:1})])),(0,l.Wm)(n,{align:"between",class:"q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q.Z,{label:e.$t("virtualHostsCreateDialog.cancelBtn"),onClick:t[7]||(t[7]=e=>f.value=!1),color:"grey-8"},null,8,["label"]),(0,l.Wm)(Q.Z,{icon:"sym_s_add",label:e.$t("virtualHostsCreateDialog.createBtn"),onClick:t[8]||(t[8]=e=>w()),disabled:!1===c.value},null,8,["label","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),Ye=ze,Be=Ye;b()(ze,"components",{QDialog:ye.Z,QCard:_.Z,QBtn:c.Z,QCardSection:q.Z,QCardActions:xe.Z});const Ae=(0,l.aZ)({__name:"VirtualHostsDeleteDialog",setup(e){const t=(0,ee.QT)().t,a=p(),s=(0,C.i)(),n=(0,l.Fl)({get:()=>a.getShowDeleteVirtualHostDialog,set:e=>{a.setShowDeleteVirtualHostDialog(e)}}),o=(0,l.Fl)((()=>a.getSelectedVirtualHost.hostname)),u=(0,l.Fl)({get:()=>s.getKeyMappingsTable,set:e=>{s.setKeyMappingsTable(e)}}),r=(0,l.Fl)((()=>{const e=(0,ke.Z)();return e.dark.isActive?"/icons/bomb_dark.svg":"/icons/bomb_light.svg"}));function d(){const e=new i.Z;(0,ve.Q)(),e.deleteVirtualHost(o.value).then((()=>{u.value++,(0,ge.LX)(`${t("virtualHostsDeleteDialog.deleteVhostSuccess")}`),n.value=!1})).catch((e=>{console.error(e),(0,ge.s9)(e.response.data,`${t("virtualHostsDeleteDialog.deleteVhostError")}`)})).finally((()=>{(0,ve.Z)()}))}return(e,t)=>((0,l.wg)(),(0,l.j4)(Ce.Z,{showDeleteDialog:n.value,"onUpdate:showDeleteDialog":t[2]||(t[2]=e=>n.value=e),imagePath:r.value,titleDialog:e.$t("virtualHostsDeleteDialog.title"),messageToDelete:e.$t("virtualHostsDeleteDialog.confirmRemove",{virtualHost:o.value}),warningToDelete:e.$t("virtualHostsDeleteDialog.warningRemove")},{"card-actions":(0,l.w5)((()=>[(0,l.Wm)(Q.Z,{label:e.$t("virtualHostsDeleteDialog.cancelBtn"),color:"grey-8",onClick:t[0]||(t[0]=e=>n.value=!1)},null,8,["label"]),(0,l.Wm)(Q.Z,{icon:"sym_s_delete",label:e.$t("virtualHostsDeleteDialog.deleteBtn"),color:"negative",onClick:t[1]||(t[1]=e=>d())},null,8,["label"])])),_:1},8,["showDeleteDialog","imagePath","titleDialog","messageToDelete","warningToDelete"]))}}),Ke=Ae,Oe=Ke;var Ee={class:"q-pa-md"},Ne={class:"text-left",style:{width:"150px"}},Xe=(0,l._)("th",null,null,-1),Ge={class:"text-left"},Je={class:"text-right"},et={class:"text-right"},tt={class:"text-right"},at={class:"text-right"},lt={class:"text-right"};function st(e,t){var a=(0,l.up)("q-skeleton"),s=(0,l.up)("q-markup-table");return(0,l.wg)(),(0,l.iD)("div",Ee,[(0,l.Wm)(s,null,{default:(0,l.w5)((function(){return[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",Ne,[(0,l.Wm)(a,{animation:"blink",type:"text"})]),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(4,(function(e){return(0,l._)("th",{key:e,class:"text-right"},[(0,l.Wm)(a,{animation:"blink",type:"text"})])})),64)),Xe])]),(0,l._)("tbody",null,[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(10,(function(e){return(0,l._)("tr",{key:e},[(0,l._)("td",Ge,[(0,l.Wm)(a,{animation:"blink",type:"text",width:"85px"})]),(0,l._)("td",Je,[(0,l.Wm)(a,{animation:"blink",type:"text",width:"50px"})]),(0,l._)("td",et,[(0,l.Wm)(a,{animation:"blink",type:"text",width:"35px"})]),(0,l._)("td",tt,[(0,l.Wm)(a,{animation:"blink",type:"text",width:"65px"})]),(0,l._)("td",at,[(0,l.Wm)(a,{animation:"blink",type:"text",width:"25px"})]),(0,l._)("td",lt,[(0,l.Wm)(a,{size:"25px"})])])})),64))])]})),_:1})])}var nt=a(11639),it=a(66933);const ot={},ut=(0,nt.Z)(ot,[["render",st]]),rt=ut;b()(ot,"components",{QMarkupTable:it.Z,QSkeleton:_e.ZP});const pt=(0,l.aZ)({__name:"MappingsIndex",setup(e){const t=(0,C.i)(),a=p(),o=(0,s.iH)([]),u=(0,s.iH)(0),r=(0,s.iH)(0),d=(0,s.iH)(!1),m=(0,l.Fl)((()=>t.getShowCreateMappingDialog)),c=(0,l.Fl)((()=>a.getShowCreateVirtualHostDialog)),g=(0,l.Fl)((()=>t.getKeyMappingsTable));function v(){d.value=!0;const e=new n.Z;e.getMappings().then((e=>{o.value=e.data.body})).catch((e=>{console.error(e)})).finally((()=>{d.value=!1}))}function b(){const e=new i.Z;e.getVirtualHosts().then((e=>{const t=e.data.body;a.setVirtualHostsList(t)})).catch((e=>{console.error(e)}))}return(0,l.YP)(m,(()=>{u.value++})),(0,l.YP)(c,(()=>{r.value++})),(0,l.YP)(g,(()=>{v(),b()})),(0,l.bv)((()=>{v(),b()})),(e,t)=>{const a=(0,l.up)("q-card-section"),s=(0,l.up)("q-card"),n=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(n,{padding:""},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(Be,{key:r.value})),(0,l.Wm)(Oe),((0,l.wg)(),(0,l.j4)(Ze,{key:u.value})),(0,l.Wm)(Se),(0,l.Wm)(s,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[!0===d.value?((0,l.wg)(),(0,l.j4)(rt,{key:0})):((0,l.wg)(),(0,l.j4)(E,{key:1,mappingsList:o.value},null,8,["mappingsList"]))])),_:1})])),_:1})])),_:1})}}});var dt=a(69885);const mt=pt,ct=mt;b()(pt,"components",{QPage:dt.Z,QCard:_.Z,QCardSection:q.Z})}}]);